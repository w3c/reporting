<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Reporting API 1</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED" rel="stylesheet" type="text/css">
  <meta content="Bikeshed version 3886cea, updated Wed Dec 2 15:53:33 2020 -0800" name="generator">
  <link href="https://w3c.github.io/reporting/" rel="canonical">
  <meta content="7984341ce9554473fc9487001b169703e9871811" name="document-revision">
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #707070;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #bbb;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-mdn-anno */

            @media (max-width: 767px) { .mdn-anno { opacity: .1 } }
            .mdn-anno { font: 1em sans-serif; padding: 0.3em; position: absolute; z-index: 8; right: 0.3em; background: #EEE; color: black; box-shadow: 0 0 3px #999; overflow: hidden; border-collapse: initial; border-spacing: initial; min-width: 9em; max-width: min-content; white-space: nowrap; word-wrap: normal; hyphens: none}
            .mdn-anno:not(.wrapped) { opacity: 1}
            .mdn-anno:hover { z-index: 9 }
            .mdn-anno.wrapped { min-width: 0 }
            .mdn-anno.wrapped > :not(button) { display: none; }
            .mdn-anno > .mdn-anno-btn { cursor: pointer; border: none; color: #000; background: transparent; margin: -8px; float: right; padding: 10px 8px 8px 8px; outline: none; }
            .mdn-anno > .mdn-anno-btn > .less-than-two-engines-flag { color: red; padding-right: 2px; }
            .mdn-anno > .mdn-anno-btn > .all-engines-flag { color: green; padding-right: 2px; }
            .mdn-anno > .mdn-anno-btn > span { color: #fff; background-color: #000; font-weight: normal; font-family: zillaslab, Palatino, "Palatino Linotype", serif; padding: 2px 3px 0px 3px; line-height: 1.3em; vertical-align: top; }
            .mdn-anno > .feature { margin-top: 20px; }
            .mdn-anno > .feature:not(:first-of-type) { border-top: 1px solid #999; margin-top: 6px; padding-top: 2px; }
            .mdn-anno > .feature > .less-than-two-engines-text { color: red }
            .mdn-anno > .feature > .all-engines-text { color: green }
            .mdn-anno > .feature > p { font-size: .75em; margin-top: 6px; margin-bottom: 0; }
            .mdn-anno > .feature > p + p { margin-top: 3px; }
            .mdn-anno > .feature > .support { display: block; font-size: 0.6em; margin: 0; padding: 0; margin-top: 2px }
            .mdn-anno > .feature > .support + div { padding-top: 0.5em; }
            .mdn-anno > .feature > .support > hr { display: block; border: none; border-top: 1px dotted #999; padding: 3px 0px 0px 0px; margin: 2px 3px 0px 3px; }
            .mdn-anno > .feature > .support > hr::before { content: ""; }
            .mdn-anno > .feature > .support > span { padding: 0.2em 0; display: block; display: table; }
            .mdn-anno > .feature > .support > span.no { color: #CCCCCC; filter: grayscale(100%); }
            .mdn-anno > .feature > .support > span.no::before { opacity: 0.5; }
            .mdn-anno > .feature > .support > span:first-of-type { padding-top: 0.5em; }
            .mdn-anno > .feature > .support > span > span { padding: 0 0.5em; display: table-cell; }
            .mdn-anno > .feature > .support > span > span:first-child { width: 100%; }
            .mdn-anno > .feature > .support > span > span:last-child { width: 100%; white-space: pre; padding: 0; }
            .mdn-anno > .feature > .support > span::before { content: ' '; display: table-cell; min-width: 1.5em; height: 1.5em; background: no-repeat center center; background-size: contain; text-align: right; font-size: 0.75em; font-weight: bold; }
            .mdn-anno > .feature > .support > .chrome_android::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
            .mdn-anno > .feature > .support > .firefox_android::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
            .mdn-anno > .feature > .support > .chrome::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
            .mdn-anno > .feature > .support > .edge_blink::before { background-image: url(https://resources.whatwg.org/browser-logos/edge.svg); }
            .mdn-anno > .feature > .support > .edge::before { background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg); }
            .mdn-anno > .feature > .support > .firefox::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
            .mdn-anno > .feature > .support > .ie::before { background-image: url(https://resources.whatwg.org/browser-logos/ie.png); }
            .mdn-anno > .feature > .support > .safari_ios::before { background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg); }
            .mdn-anno > .feature > .support > .nodejs::before { background-image: url(https://nodejs.org/static/images/favicons/favicon.ico); }
            .mdn-anno > .feature > .support > .opera_android::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.svg); }
            .mdn-anno > .feature > .support > .opera::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.svg); }
            .mdn-anno > .feature > .support > .safari::before { background-image: url(https://resources.whatwg.org/browser-logos/safari.png); }
            .mdn-anno > .feature > .support > .samsunginternet_android::before { background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg); }
            .mdn-anno > .feature > .support > .webview_android::before { background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png); }
            .name-slug-mismatch { color: red }
            .caniuse-status:hover { z-index: 9; }

            /* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */
            .h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno { right: -6.7em; }
            .h-entry p + .mdn-anno { margin-top: 0; }
            h2 + .mdn-anno.after { margin: -48px 0 0 0; }
            h3 + .mdn-anno.after { margin: -46px 0 0 0; }
            h4 + .mdn-anno.after { margin: -42px 0 0 0; }
            h5 + .mdn-anno.after { margin: -40px 0 0 0; }
            h6 + .mdn-anno.after { margin: -40px 0 0 0; }
            </style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-var-click-highlighting */

    var { cursor: pointer; }
    var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
    var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
    var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
    var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
    var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
    var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
    var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
    </style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <header>
    <p data-fill-with="logo"><a href="https://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"></a> </p>
    <h1>Reporting API</h1>
    <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor’s Draft, <time class="dt-updated" datetime="2020-12-08">8 December 2020</time></span></h2>
   </header>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://w3c.github.io/reporting/">https://w3c.github.io/reporting/</a>
     <dt>Version History:
     <dd><a href="https://github.com/w3c/reporting/commits/master/index.src.html">https://github.com/w3c/reporting/commits/master/index.src.html</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard" data-editor-id="103120"><a class="p-name fn u-email email" href="mailto:dcreager@dcreager.net">Douglas Creager</a> (<span class="p-org org">GitHub</span>)
     <dd class="editor p-author h-card vcard" data-editor-id="76841"><a class="p-name fn u-email email" href="mailto:iclelland@google.com">Ian Clelland</a> (<span class="p-org org">Google Inc.</span>)
     <dd class="editor p-author h-card vcard" data-editor-id="56384"><a class="p-name fn u-email email" href="mailto:mkwst@google.com">Mike West</a> (<span class="p-org org">Google Inc.</span>)
     <dt class="editor">Former Editors:
     <dd class="editor p-author h-card vcard" data-editor-id="56102"><a class="p-name fn u-email email" href="mailto:igrigorik@google.com">Ilya Grigorik</a> (<span class="p-org org">Google Inc.</span>)
     <dd class="editor p-author h-card vcard" data-editor-id="99916"><a class="p-name fn u-email email" href="mailto:paulmeyer@google.com">Paul Meyer</a> (<span class="p-org org">Google Inc.</span>)
     <dt>Participate:
     <dd><a href="https://github.com/w3c/reporting/issues/new">File an issue</a> (<a href="https://github.com/w3c/reporting/issues">open issues</a>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2020 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document defines a generic reporting framework which allows web

  developers to associate a set of named reporting endpoints with an origin.
  Various platform features can use these endpoints to deliver
  feature-specific reports in a consistent manner.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at https://www.w3.org/TR/.</em> </p>
   <p> This document was published by the <a href="https://www.w3.org/webperf/">Web Performance Working Group</a> as an Editors Draft. This document is intended to become a W3C Recommendation. </p>
   <p></p>
   <p> Feedback and comments on this specification are welcome, please send them to <a href="mailto:public-web-perf@w3.org?subject=%5Breporting%5D">public-web-perf@w3.org</a> (<a href="mailto:public-web-perf-request@w3.org?subject=subscribe">subscribe</a>, <a href="https://lists.w3.org/Archives/Public/public-web-perf/">archives</a>) with <code>[reporting]</code> at the start of your email’s subject. </p>
   <p> Publication as an Editors Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership. This is a draft document and may
    be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite
    this document as other than work in progress. </p>
   <p> This document was produced by a group operating under the <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>. <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="https://www.w3.org/2004/01/pp-impl/45211/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>. </p>
   <p>This document is governed by the <a href="https://www.w3.org/2020/Process-20200915/" id="w3c_process_revision">15 September 2020 W3C Process Document</a>. </p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#guarantees"><span class="secno">1.1</span> <span class="content">Guarantees</span></a>
      <li><a href="#examples"><span class="secno">1.2</span> <span class="content">Examples</span></a>
     </ol>
    <li>
     <a href="#generic-reporting"><span class="secno">2</span> <span class="content">Generic Reporting Framework</span></a>
     <ol class="toc">
      <li>
       <a href="#concept"><span class="secno">2.1</span> <span class="content">Concepts</span></a>
       <ol class="toc">
        <li><a href="#concept-endpoints"><span class="secno">2.1.1</span> <span class="content">Endpoints</span></a>
        <li><a href="#concept-report-type"><span class="secno">2.1.2</span> <span class="content">Report Type</span></a>
        <li><a href="#concept-reports"><span class="secno">2.1.3</span> <span class="content">Reports</span></a>
       </ol>
      <li><a href="#media-type"><span class="secno">2.2</span> <span class="content">Media Type</span></a>
      <li><a href="#queue-report"><span class="secno">2.3</span> <span class="content"> Queue <var>data</var> as <var>type</var> for <var>destination</var> </span></a>
      <li><a href="#serialize-reports"><span class="secno">2.4</span> <span class="content">Serialize Reports</span></a>
     </ol>
    <li>
     <a href="#document-reporting"><span class="secno">3</span> <span class="content">Document Centered Reporting</span></a>
     <ol class="toc">
      <li><a href="#document-configuration"><span class="secno">3.1</span> <span class="content">Document configuration</span></a>
      <li><a href="#header"><span class="secno">3.2</span> <span class="content">The <code>Reporting-Endpoints</code> HTTP Response Header Field</span></a>
      <li><a href="#process-header"><span class="secno">3.3</span> <span class="content"> Process reporting endpoints for <var>response</var> </span></a>
      <li>
       <a href="#report-generation"><span class="secno">3.4</span> <span class="content">Report Generation</span></a>
       <ol class="toc">
        <li><a href="#generate-report"><span class="secno">3.4.1</span> <span class="content">Generate report of <var>type</var> with <var>data</var></span></a>
       </ol>
      <li>
       <a href="#report-delivery"><span class="secno">3.5</span> <span class="content">Report Delivery</span></a>
       <ol class="toc">
        <li><a href="#send-reports"><span class="secno">3.5.1</span> <span class="content">Send reports</span></a>
        <li><a href="#try-delivery"><span class="secno">3.5.2</span> <span class="content"> Attempt to deliver <var>reports</var> to <var>endpoint</var> </span></a>
       </ol>
     </ol>
    <li>
     <a href="#observers"><span class="secno">4</span> <span class="content">Reporting Observers</span></a>
     <ol class="toc">
      <li><a href="#interface-reporting-observer"><span class="secno">4.1</span> <span class="content">Interface <code class="idl"><span>ReportingObserver</span></code></span></a>
      <li><a href="#notify-observers"><span class="secno">4.2</span> <span class="content"> Notify reporting observers on <var>scope</var> with <var>report</var> </span></a>
      <li><a href="#add-report"><span class="secno">4.3</span> <span class="content"> Add <var>report</var> to <var>observer</var> </span></a>
      <li><a href="#invoke-observers"><span class="secno">4.4</span> <span class="content"> Invoke reporting observers with <var>notify list</var> </span></a>
     </ol>
    <li>
     <a href="#implementation"><span class="secno">5</span> <span class="content">Implementation Considerations</span></a>
     <ol class="toc">
      <li><a href="#delivery"><span class="secno">5.1</span> <span class="content">Delivery</span></a>
      <li><a href="#gc"><span class="secno">5.2</span> <span class="content">Garbage Collection</span></a>
     </ol>
    <li><a href="#sample-reports"><span class="secno">6</span> <span class="content">Sample Reports</span></a>
    <li>
     <a href="#automation"><span class="secno">7</span> <span class="content">Automation</span></a>
     <ol class="toc">
      <li><a href="#generate-test-report-command"><span class="secno">7.1</span> <span class="content">Generate Test Report</span></a>
     </ol>
    <li>
     <a href="#security"><span class="secno">8</span> <span class="content">Security Considerations</span></a>
     <ol class="toc">
      <li><a href="#capability-urls"><span class="secno">8.1</span> <span class="content">Capability URLs</span></a>
     </ol>
    <li>
     <a href="#privacy"><span class="secno">9</span> <span class="content">Privacy Considerations</span></a>
     <ol class="toc">
      <li><a href="#network-leakage"><span class="secno">9.1</span> <span class="content">Network Leakage</span></a>
      <li><a href="#fingerprinting-clock-skew"><span class="secno">9.2</span> <span class="content">Clock Skew</span></a>
      <li><a href="#correlation"><span class="secno">9.3</span> <span class="content">Cross-origin correlation</span></a>
      <li><a href="#disable"><span class="secno">9.4</span> <span class="content">Disabling Reporting</span></a>
     </ol>
    <li>
     <a href="#iana-considerations"><span class="secno">10</span> <span class="content">IANA Considerations</span></a>
     <ol class="toc">
      <li><a href="#header-field-registration"><span class="secno">10.1</span> <span class="content">The <code>Reporting-Endpoints</code> Header</span></a>
      <li><a href="#media-type-registration"><span class="secno">10.2</span> <span class="content">The <code>application/reports+json</code> Media Type</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <section>
    <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
    <p>This document provides three pieces of infrastructure for generic reporting,
  which may be used or extended by other specifications:</p>
    <ol>
     <li data-md>
      <p>A generic framework for defining report types and reporting endpoints, and
 a document format for sending reports to endpoints over HTTP.</p>
     <li data-md>
      <p>A specific mechanism for configuring reporting endpoints in a document or
 worker, and for delivering reports whose lifetime is tied to that document
 or worker.</p>
     <li data-md>
      <p>A JavaScript interface for observing reports generated within a document or
 worker.</p>
    </ol>
    <p>Other specifications may extend or make use of these pieces, for instance by
  defining concrete report types, or alternative configuration or delivery
  mechanisms for non-document-based reports.</p>
    <h3 class="heading settled" data-level="1.1" id="guarantees"><span class="secno">1.1. </span><span class="content">Guarantees</span><a class="self-link" href="#guarantees"></a></h3>
    <p>This specification aims to provide a best-effort report delivery system that
  executes out-of-band with website activity. The user agent will be able to do
  a better job prioritizing and scheduling delivery of reports, as it has an
  overview of cross-origin activity that individual websites do not, and can
  deliver reports based on error conditions that would prevent a website from
  loading in the first place.</p>
    <p>The delivery is not, however, guaranteed in any way, and reporting is not
  intended to be used as a reliable communications channel. Network conditions
  may prevent reports from reaching their destination at all, and user agents
  are permitted to reject and not deliver a report for any reason.</p>
    <h3 class="heading settled" data-level="1.2" id="examples"><span class="secno">1.2. </span><span class="content">Examples</span><a class="self-link" href="#examples"></a></h3>
    <div class="example" id="example-bd21f0f9">
     <a class="self-link" href="#example-bd21f0f9"></a> MegaCorp Inc. wants to collect Content Security Policy and Key Pinning
    violation reports. It can do so by delivering the following header to
    define a set of reporting endpoints named "<code>endpoint-1</code>": 
<pre><a data-link-type="dfn" href="#reporting-endpoints" id="ref-for-reporting-endpoints">Reporting-Endpoints</a>: endpoint-1="https://example.com/reports"
</pre>
     <p>And the following headers, which direct CSP and HPKP reports to that
    endpoint:</p>
<pre><a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#content-security-policy" id="ref-for-content-security-policy">Content-Security-Policy</a>: ...; <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directives-reporting" id="ref-for-directives-reporting">report-to</a> endpoint-1
<a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7469#section-2.1" id="ref-for-section-2.1">Public-Key-Pins</a>: ...; report-to=endpoint-1
</pre>
    </div>
    <div class="example" id="example-b1cea891">
     <a class="self-link" href="#example-b1cea891"></a> After processing reports for a little while, MegaCorp Inc. decides to split
    the processing of these two types of reports out into two distinct endpoints
    in order to make the processing scripts simpler. It can do so by delivering
    the following header to define two reporting endpoints: 
<pre><a data-link-type="dfn" href="#reporting-endpoints" id="ref-for-reporting-endpoints①">Reporting-Endpoints</a>: csp-endpoint="https://example.com/csp-reports",
                     hpkp-endpoint="https://example.com/hpkp-reports"
</pre>
     <p>And the following headers, which direct CSP and HPKP reports to those named
    endpoints:</p>
<pre><a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#content-security-policy" id="ref-for-content-security-policy①">Content-Security-Policy</a>: ...; <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#directives-reporting" id="ref-for-directives-reporting①">report-to</a> csp-endpoint
<a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7469#section-2.1" id="ref-for-section-2.1①">Public-Key-Pins</a>: ...; report-to=hpkp-endpoint
</pre>
    </div>
   </section>
   <section>
    <h2 class="heading settled" data-level="2" id="generic-reporting"><span class="secno">2. </span><span class="content">Generic Reporting Framework</span><a class="self-link" href="#generic-reporting"></a></h2>
    <p class="informative"> This section defines the generic concepts of reports and endpoints, and how
  reports are serialized into the <a href="#media-type"><code>application/reports+json</code></a> format.</p>
    <h3 class="heading settled" data-level="2.1" id="concept"><span class="secno">2.1. </span><span class="content">Concepts</span><a class="self-link" href="#concept"></a></h3>
    <h4 class="heading settled" data-level="2.1.1" id="concept-endpoints"><span class="secno">2.1.1. </span><span class="content">Endpoints</span><a class="self-link" href="#concept-endpoints"></a></h4>
    <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="endpoint">endpoint</dfn> is location to which <a data-link-type="dfn" href="#windoworworkerglobalscope-reports" id="ref-for-windoworworkerglobalscope-reports">reports</a> for a
  particular <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin" id="ref-for-origin">origin</a> may be sent.</p>
    <p>Each <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint">endpoint</a> has a <dfn class="dfn-paneled idl-code" data-dfn-for="endpoint" data-dfn-type="attribute" data-export id="dom-endpoint-name"><code>name</code></dfn>, which is an ASCII string.</p>
    <p>Each <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint①">endpoint</a> has a <dfn class="dfn-paneled idl-code" data-dfn-for="endpoint" data-dfn-type="attribute" data-export id="dom-endpoint-url"><code>url</code></dfn>,
  which is a <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url">URL</a></code>.</p>
    <p>Each <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint②">endpoint</a> has a <dfn class="dfn-paneled idl-code" data-dfn-for="endpoint" data-dfn-type="attribute" data-export id="dom-endpoint-failures"><code>failures</code></dfn>, which is a non-negative
  integer representing the number of consecutive times this endpoint has failed
  to respond to a request.</p>
    <h4 class="heading settled" data-level="2.1.2" id="concept-report-type"><span class="secno">2.1.2. </span><span class="content">Report Type</span><a class="self-link" href="#concept-report-type"></a></h4>
    <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="report-type">report type</dfn> is a non-empty string that specifies the set
  of data that is contained in the <a data-link-type="dfn" href="#report-body" id="ref-for-report-body">body</a> of a <a data-link-type="dfn" href="#report" id="ref-for-report">report</a>.</p>
    <p>When a <a data-link-type="dfn" href="#report-type" id="ref-for-report-type">report type</a> is defined (in this spec or others), it can be
  specified to be <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="visible-to-reportingobservers">visible to <code>ReportingObserver</code>s</dfn>, meaning
  that <a data-link-type="dfn" href="#windoworworkerglobalscope-reports" id="ref-for-windoworworkerglobalscope-reports①">reports</a> of that type can be observed by a <a data-link-type="dfn" href="#reporting-observer" id="ref-for-reporting-observer">reporting
  observer</a>. By default, <a data-link-type="dfn" href="#report-type" id="ref-for-report-type①">report types</a> are not <a data-link-type="dfn" href="#visible-to-reportingobservers" id="ref-for-visible-to-reportingobservers">visible to <code>ReportingObserver</code>s</a>.</p>
    <h4 class="heading settled" data-level="2.1.3" id="concept-reports"><span class="secno">2.1.3. </span><span class="content">Reports</span><a class="self-link" href="#concept-reports"></a></h4>
    <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="report">report</dfn> is a collection of arbitrary data which the user
  agent is expected to deliver to a specified endpoint.</p>
    <p>Each <a data-link-type="dfn" href="#report" id="ref-for-report①">report</a> has a <dfn class="dfn-paneled" data-dfn-for="report" data-dfn-type="dfn" data-export id="report-body">body</dfn>, which is either <code>null</code> or an object which can be serialized into a <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc8259#section-2" id="ref-for-section-2">JSON text</a>. The
  fields contained in a <a data-link-type="dfn" href="#report" id="ref-for-report②">report</a>’s <a data-link-type="dfn" href="#report-body" id="ref-for-report-body①">body</a> are determined by
  the <a data-link-type="dfn" href="#report" id="ref-for-report③">report</a>’s <a data-link-type="dfn" href="#report-reporttype" id="ref-for-report-reporttype">type</a>.</p>
    <p>Each <a data-link-type="dfn" href="#report" id="ref-for-report④">report</a> has a <dfn class="dfn-paneled" data-dfn-for="report" data-dfn-type="dfn" data-export id="report-url">url</dfn>, which
  is typically the address of the <code>Document</code> or <code>Worker</code> from which the report
  was generated.</p>
    <p class="note" role="note"><span>Note:</span> We strip the username, password, and fragment from this serialized URL.
  See <a href="#capability-urls">§ 8.1 Capability URLs</a>.</p>
    <p>Each <a data-link-type="dfn" href="#report" id="ref-for-report⑤">report</a> has a <dfn class="dfn-paneled" data-dfn-for="report" data-dfn-type="dfn" data-export id="report-user-agent">user agent</dfn>, which is
  the value of the <code>User-Agent</code> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header">header</a> of the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request">request</a> from which the report was generated.</p>
    <p class="note" role="note"><span>Note:</span> The <a data-link-type="dfn" href="#report-user-agent" id="ref-for-report-user-agent">user agent</a> of a <a data-link-type="dfn" href="#report" id="ref-for-report⑥">report</a> represents the <code>User-Agent</code> sent by the browser for the page which generated the <a data-link-type="dfn" href="#report" id="ref-for-report⑦">report</a>.  This is potentially distinct from the <code>User-Agent</code> sent in the HTTP headers when uploading the report to a collector — for
  instance, where the browser has chosen to use a non-default <code>User-Agent</code> string such as the "request desktop site" feature.</p>
    <p>Each <a data-link-type="dfn" href="#report" id="ref-for-report⑧">report</a> has a <dfn class="dfn-paneled" data-dfn-for="report" data-dfn-type="dfn" data-export id="report-destination">destination</dfn>,
  which is a string representing the <code class="idl"><a data-link-type="idl" href="#dom-endpoint-name" id="ref-for-dom-endpoint-name">name</a></code> of the <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint③">endpoint</a> that the report will be sent to.</p>
    <p>Each <a data-link-type="dfn" href="#report" id="ref-for-report⑨">report</a> has a <dfn class="dfn-paneled" data-dfn-for="report" data-dfn-type="dfn" data-export id="report-reporttype">type</dfn>, which is a <a data-link-type="dfn" href="#report-type" id="ref-for-report-type②">report type</a>.</p>
    <p>Each <a data-link-type="dfn" href="#report" id="ref-for-report①⓪">report</a> has a <dfn class="dfn-paneled" data-dfn-for="report" data-dfn-type="dfn" data-export id="report-timestamp">timestamp</dfn>,
  which records the time at which the report was generated, in milliseconds
  since the unix epoch.</p>
    <p>Each <a data-link-type="dfn" href="#report" id="ref-for-report①①">report</a> has an <dfn class="dfn-paneled" data-dfn-for="report" data-dfn-type="dfn" data-export id="report-attempts">attempts</dfn> counter, which is a non-negative integer representing the number of times the
  user agent attempted to deliver the report.</p>
    <h3 class="heading settled" data-level="2.2" id="media-type"><span class="secno">2.2. </span><span class="content">Media Type</span><a class="self-link" href="#media-type"></a></h3>
    <p>The media type used when POSTing reports to a specified endpoint is <code>application/reports+json</code>.</p>
    <h3 class="heading settled algorithm" data-algorithm="Queue data as type for destination" data-level="2.3" id="queue-report"><span class="secno">2.3. </span><span class="content"> Queue <var>data</var> as <var>type</var> for <var>destination</var> </span><a class="self-link" href="#queue-report"></a></h3>
    <p>To <dfn data-dfn-for="reporting" data-dfn-type="dfn" data-export id="reporting-queue">queue<a class="self-link" href="#reporting-queue"></a></dfn> a <a data-link-type="dfn" href="#report" id="ref-for-report①②">report</a> given a
  serializable object (<var>data</var>), a string (<var>type</var>), another string
  (<var>destination</var>), an optional <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object">environment settings object</a> (<var>settings</var>), and an optional <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①">URL</a></code> (<var>url</var>):</p>
    <ol>
     <li data-md>
      <p>Let <var>report</var> be a new <a data-link-type="dfn" href="#report" id="ref-for-report①③">report</a> object with its values initialized as
  follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#report-body" id="ref-for-report-body②">body</a>
       <dd data-md>
        <p><var>data</var></p>
       <dt data-md><a data-link-type="dfn" href="#report-user-agent" id="ref-for-report-user-agent①">user agent</a>
       <dd data-md>
        <p>The current value of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/system-state.html#dom-navigator-useragent" id="ref-for-dom-navigator-useragent"><code>navigator.userAgent</code></a></p>
       <dt data-md><a data-link-type="dfn" href="#report-destination" id="ref-for-report-destination">destination</a>
       <dd data-md>
        <p><var>destination</var></p>
       <dt data-md><a data-link-type="dfn" href="#report-reporttype" id="ref-for-report-reporttype①">type</a>
       <dd data-md>
        <p><var>type</var></p>
       <dt data-md><a data-link-type="dfn" href="#report-timestamp" id="ref-for-report-timestamp">timestamp</a>
       <dd data-md>
        <p>The current timestamp.</p>
       <dt data-md><a data-link-type="dfn" href="#report-attempts" id="ref-for-report-attempts">attempts</a>
       <dd data-md>
        <p>0</p>
      </dl>
     <li data-md>
      <p>If <var>url</var> was not provided by the caller, let <var>url</var> be <var>settings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#creation-url" id="ref-for-creation-url">creation URL</a>.</p>
     <li data-md>
      <p>Set <var>url</var>’s <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#concept-url-username" id="ref-for-concept-url-username">username</a></code> to the empty string, and its <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#concept-url-password" id="ref-for-concept-url-password">password</a></code> to <code>null</code>.</p>
     <li data-md>
      <p>Set <var>report</var>’s <a data-link-type="dfn" href="#report-url" id="ref-for-report-url">url</a> to the result of executing the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer">URL
  serializer</a> on <var>url</var> with the <em>exclude fragment flag</em> set.</p>
     <li data-md>
      <p>If <var>settings</var> is given, then</p>
      <ol>
       <li data-md>
        <p>Let <var>scope</var> be <var>settings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global">global
  object</a>.</p>
       <li data-md>
        <p>If <var>scope</var> is an object implementing <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope">WindowOrWorkerGlobalScope</a></code>,
  then execute <a href="#notify-observers">§ 4.2 Notify reporting observers on scope with report</a> with <var>scope</var> and <var>report</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>report</var>.</p>
    </ol>
    <p class="note" role="note"><span>Note:</span> <a data-link-type="dfn" href="#reporting-observer" id="ref-for-reporting-observer①">reporting observers</a> can only observe reports from the
  same <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①">environment settings object</a>.</p>
    <p class="note" role="note"><span>Note:</span> We strip the username, password, and fragment from the serialized URL
  in the report. See <a href="#capability-urls">§ 8.1 Capability URLs</a>.</p>
    <p class="note" role="note"><span>Note:</span> The user agent MAY reject reports for any reason. This API does not
  guarantee delivery of arbitrary amounts of data, for instance.</p>
    <p class="note" role="note"><span>Note:</span> Non user agent clients (with no JavaScript engine) should not interact
  with <a data-link-type="dfn" href="#reporting-observer" id="ref-for-reporting-observer②">reporting observers</a>, and thus should return in step 6.</p>
    <h3 class="heading settled algorithm" data-algorithm="Serialize Reports" data-level="2.4" id="serialize-reports"><span class="secno">2.4. </span><span class="content">Serialize Reports</span><a class="self-link" href="#serialize-reports"></a></h3>
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-a-list-of-reports-to-json">serialize a list of <var>reports</var> to JSON</dfn>,</p>
    <ol>
     <li data-md>
      <p>Let <var>collection</var> be a new ECMAScript <code>Array</code> object <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a>.</p>
     <li data-md>
      <p>For each <var>report</var> in <var>reports</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>data</var> be a new ECMAScript <code>Object</code> with the following properties <a data-link-type="biblio" href="#biblio-ecma-262">[ECMA-262]</a>:</p>
        <dl>
         <dt data-md><code>age</code>
         <dd data-md>
          <p>The number of milliseconds between <var>report</var>’s <a data-link-type="dfn" href="#report-timestamp" id="ref-for-report-timestamp①">timestamp</a> and the current time.</p>
         <dt data-md><code>type</code>
         <dd data-md>
          <p><var>report</var>’s <a data-link-type="dfn" href="#report-reporttype" id="ref-for-report-reporttype②">type</a></p>
         <dt data-md><code>url</code>
         <dd data-md>
          <p><var>report</var>’s <a data-link-type="dfn" href="#report-url" id="ref-for-report-url①">url</a></p>
         <dt data-md><code>user_agent</code>
         <dd data-md>
          <p><var>report</var>’s <a data-link-type="dfn" href="#report-user-agent" id="ref-for-report-user-agent②">user agent</a></p>
         <dt data-md><code>body</code>
         <dd data-md>
          <p><var>report</var>’s <a data-link-type="dfn" href="#report-body" id="ref-for-report-body③">body</a></p>
        </dl>
        <p class="note" role="note"><span>Note:</span> Client clocks are unreliable and subject to skew. We therefore
  deliver an <code>age</code> attribute rather than an absolute timestamp. See
  also <a href="#fingerprinting-clock-skew">§ 9.2 Clock Skew</a></p>
       <li data-md>
        <p>Increment <var>report</var>’s <a data-link-type="dfn" href="#report-attempts" id="ref-for-report-attempts①">attempts</a>.</p>
       <li data-md>
        <p>Append <var>data</var> to <var>collection</var>.</p>
      </ol>
     <li data-md>
      <p>Return the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence">byte sequence</a> resulting from executing <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#serialize-a-javascript-value-to-json-bytes" id="ref-for-serialize-a-javascript-value-to-json-bytes">serialize JSON to
 bytes</a> on <var>collection</var>.</p>
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="3" id="document-reporting"><span class="secno">3. </span><span class="content">Document Centered Reporting</span><a class="self-link" href="#document-reporting"></a></h2>
    <p>This section defines the mechanism for configuring reporting endpoints for
  reports generated by actions in a document (or in a worker script). Such
  reports have a lifetime which is tied to that of the document or worker where
  they were generated.</p>
    <h3 class="heading settled" data-level="3.1" id="document-configuration"><span class="secno">3.1. </span><span class="content">Document configuration</span><a class="self-link" href="#document-configuration"></a></h3>
    <p>Each object implementing <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope①">WindowOrWorkerGlobalScope</a></code> has an <dfn class="dfn-paneled" data-dfn-for="WindowOrWorkerGlobalScope" data-dfn-type="dfn" data-export id="windoworworkerglobalscope-endpoints">endpoints</dfn> list, which
  is a list of <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint④">endpoints</a>, each of which MUST have a distinct <code class="idl"><a data-link-type="idl" href="#dom-endpoint-name" id="ref-for-dom-endpoint-name①">name</a></code>.  (Uniqueness is guaranteed by the algorithm in <a href="#process-header">§ 3.3 Process reporting endpoints for response</a>.)</p>
    <p>Each object implementing <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope②">WindowOrWorkerGlobalScope</a></code> has an <dfn class="dfn-paneled" data-dfn-for="WindowOrWorkerGlobalScope" data-dfn-type="dfn" data-export id="windoworworkerglobalscope-reports">reports</dfn> list, which is
  a list of <a data-link-type="dfn" href="#report" id="ref-for-report①④">reports</a>.</p>
    <p>To <dfn data-dfn-type="dfn" data-export id="initialize-a-globals-endpoint-list">initialize a global’s endpoint list<a class="self-link" href="#initialize-a-globals-endpoint-list"></a></dfn>, given a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope③">WindowOrWorkerGlobalScope</a></code> (<var>scope</var>) and a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response">response</a> (<var>response</var>),
  set <var>scope</var>’s <a data-link-type="dfn" href="#windoworworkerglobalscope-endpoints" id="ref-for-windoworworkerglobalscope-endpoints">endpoints</a> to the result
  of executing <a href="#process-header">§ 3.3 Process reporting endpoints for response</a> given <var>response</var>.</p>
    <h3 class="heading settled" data-level="3.2" id="header"><span class="secno">3.2. </span><span class="content">The <code>Reporting-Endpoints</code> HTTP Response Header Field</span><a class="self-link" href="#header"></a></h3>
    <p>A server MAY define a set of reporting endpoints for a document or a worker
  script resource it returns, via the <a data-link-type="dfn" href="#reporting-endpoints" id="ref-for-reporting-endpoints②"><code>Reporting-Endpoints</code></a> HTTP response
  header field. This mechanism is defined in <a href="#header">§ 3.2 The Reporting-Endpoints HTTP Response Header Field</a>, and its processing in <a href="#process-header">§ 3.3 Process reporting endpoints for response</a>.</p>
    <p>The value of the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="reporting-endpoints"><code>Reporting-Endpoints</code></dfn> HTTP response header
  field is used to construct the reporting configuration for a resource.</p>
    <p><a data-link-type="dfn" href="#reporting-endpoints" id="ref-for-reporting-endpoints③"><code>Reporting-Endpoints</code></a> is a Dictionary Structured Header <a data-link-type="biblio" href="#biblio-structured-headers">[STRUCTURED-HEADERS]</a>. Each entry in the dictionary defines an <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint⑤">endpoint</a> to which reports may be delivered. The entry value MUST be a
  string.</p>
    <p>Each <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint⑥">endpoint</a> is defined by a String Item, which is interpreted as a
  URI-reference. If its value is not a valid URI-reference, that <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint⑦">endpoint</a> member MUST be ignored.</p>
    <p>Moreover, the URL that the member’s value represents MUST be <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy" id="ref-for-is-origin-trustworthy">potentially
  trustworthy</a> <a data-link-type="biblio" href="#biblio-secure-contexts">[SECURE-CONTEXTS]</a>. Non-secure endpoints will be ignored.</p>
    <p>No parameters are defined for <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint⑧">endpoints</a>, and any parameters
  which are specified will be silently ignored.</p>
    <p>The header is represented by the following ABNF grammar <a data-link-type="biblio" href="#biblio-rfc5234">[RFC5234]</a>:</p>
<pre class="abnf">Reporting-Endpoints = <a data-link-type="grammar" href="https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html#rfc.section.3.2" id="ref-for-rfc.section.3.2">sh-dictionary</a>
</pre>
    <h3 class="heading settled algorithm" data-algorithm="Process reporting endpoints for response" data-level="3.3" id="process-header"><span class="secno">3.3. </span><span class="content"> Process reporting endpoints for <var>response</var> </span><a class="self-link" href="#process-header"></a></h3>
    <p>Given a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response①">response</a> (<var>response</var>), this algorithm extracts and returns a
  list of <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint⑨">endpoints</a>.</p>
    <ol>
     <li data-md>
      <p>Abort these steps if <var>response</var>’s <a class="idl-code" data-link-type="attribute" href="https://fetch.spec.whatwg.org/#concept-response-https-state" id="ref-for-concept-response-https-state">HTTPS
  state</a> is not "<code>modern</code>", and the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin">origin</a> of <var>response</var>’s <a class="idl-code" data-link-type="attribute" href="https://fetch.spec.whatwg.org/#concept-response-url" id="ref-for-concept-response-url">url</a> is not <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy" id="ref-for-is-origin-trustworthy①">potentially
  trustworthy</a>.</p>
     <li data-md>
      <p>Let <var>parsed header</var> be the result of executing <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header" id="ref-for-concept-header-list-get-structured-header">get a structured field
  value</a> given "Reporting-Endpoints" and "dictionary" from <var>response</var>’s <a class="idl-code" data-link-type="attribute" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list">header list</a>.</p>
     <li data-md>
      <p>If <var>parsed header</var> is null, abort these steps.</p>
     <li data-md>
      <p>Let <var>endpoints</var> be an empty list.</p>
     <li data-md>
      <p>For each <var>name</var> → <var>value_and_parameters</var> of <var>parsed header</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>endpoint url string</var> be the first element of the tuple <var>value_and_parameters</var>. If <var>endpoint url string</var> is not a string,
  then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue">continue</a>.</p>
       <li data-md>
        <p>Let <var>endpoint url</var> be the result of executing the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser">URL parser</a> on <var>endpoint url string</var>, with <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-base-url" id="ref-for-concept-base-url">base URL</a> set to <var>response</var>’s <a class="idl-code" data-link-type="attribute" href="https://fetch.spec.whatwg.org/#concept-response-url" id="ref-for-concept-response-url①">url</a>. If <var>endpoint url</var> is
  failure, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①">continue</a>.</p>
       <li data-md>
        <p>If <var>endpoint url</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin" id="ref-for-origin①">origin</a> is not <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy" id="ref-for-is-origin-trustworthy②">potentially
  trustworthy</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue②">continue</a>.</p>
       <li data-md>
        <p>Let <var>endpoint</var> be a new <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint①⓪">endpoint</a> whose properties are set
      as follows:</p>
        <dl>
         <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-endpoint-name" id="ref-for-dom-endpoint-name②">name</a></code>
         <dd data-md>
          <p><var>name</var></p>
         <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-endpoint-url" id="ref-for-dom-endpoint-url">url</a></code>
         <dd data-md>
          <p><var>endpoint url</var></p>
         <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-endpoint-failures" id="ref-for-dom-endpoint-failures">failures</a></code>
         <dd data-md>
          <p>0</p>
        </dl>
       <li data-md>
        <p>Add <var>endpoint</var> to <var>endpoints</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>endpoints</var>.</p>
    </ol>
    <h3 class="heading settled" data-level="3.4" id="report-generation"><span class="secno">3.4. </span><span class="content">Report Generation</span><a class="self-link" href="#report-generation"></a></h3>
    <h4 class="heading settled algorithm" data-algorithm="Generate report of type with
  data" data-export data-level="3.4.1" id="generate-report"><span class="secno">3.4.1. </span><span class="content">Generate report of <var>type</var> with <var>data</var></span><a class="self-link" href="#generate-report"></a></h4>
    <p>When the user agent is to <dfn data-dfn-type="dfn" data-noexport id="generate-a-report">generate a report<a class="self-link" href="#generate-a-report"></a></dfn> for a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document">Document</a> or <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope" id="ref-for-workerglobalscope">WorkerGlobalScope</a></code> object (<var>context</var>), given a string (<var>type</var>), another
  string (<var>destination</var>), and a serializable object (<var>data</var>), it must run the
  following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>settings</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>report</var> be the result of running <a href="#queue-report">§ 2.3 Queue data as type for destination</a> with <var>data</var>, <var>type</var>, <var>destination</var> and <var>settings</var>.</p>
     <li data-md>
      <p>Append <var>report</var> to <var>context</var>’s <a data-link-type="dfn" href="#windoworworkerglobalscope-reports" id="ref-for-windoworworkerglobalscope-reports②">reports</a>.</p>
    </ol>
    <h3 class="heading settled" data-level="3.5" id="report-delivery"><span class="secno">3.5. </span><span class="content">Report Delivery</span><a class="self-link" href="#report-delivery"></a></h3>
    <p>Over time, various features will queue up a list of <a data-link-type="dfn" href="#windoworworkerglobalscope-reports" id="ref-for-windoworworkerglobalscope-reports③">reports</a> in
  documents and workers. The user agent will periodically grab the list of
  currently queued reports, and deliver them to the associated endpoints. This
  document does not define a schedule for the user agent to follow, and assumes
  that the user agent will have enough contextual information to deliver reports
  in a timely manner, balanced against impacting a user’s experience.</p>
    <p>That said, a user agent SHOULD make an effort to deliver reports as soon as
  possible after queuing, as a report’s data might be significantly more useful
  in the period directly after its generation than it would be a day or a week
  later.</p>
    <h4 class="heading settled algorithm" data-algorithm="Send reports" data-level="3.5.1" id="send-reports"><span class="secno">3.5.1. </span><span class="content">Send reports</span><a class="self-link" href="#send-reports"></a></h4>
    <p>A user agent sends a list of <a data-link-type="dfn" href="#windoworworkerglobalscope-reports" id="ref-for-windoworworkerglobalscope-reports④">reports</a> (<var>reports</var>) for <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope④">WindowOrWorkerGlobalScope</a></code> object (<var>context</var>) by executing the following
  steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>endpoint map</var> be an empty map of <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint①①">endpoint</a> objects to lists of <a data-link-type="dfn" href="#report" id="ref-for-report①⑤">report</a> objects.</p>
     <li data-md>
      <p>For each <var>report</var> in <var>reports</var>:</p>
      <ol>
       <li data-md>
        <p>If there exists an <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint①②">endpoint</a> (<var>endpoint</var>) in <var>context</var>’s <a data-link-type="dfn" href="#windoworworkerglobalscope-endpoints" id="ref-for-windoworworkerglobalscope-endpoints①">endpoints</a> list whose <code class="idl"><a data-link-type="idl" href="#dom-endpoint-name" id="ref-for-dom-endpoint-name③">name</a></code> is <var>report</var>’s <a data-link-type="dfn" href="#report-destination" id="ref-for-report-destination①">destination</a>:</p>
        <ol>
         <li data-md>
          <p>Append <var>report</var> to <var>endpoint map</var>’s list of reports for <var>endpoint</var>.</p>
         <li data-md>
          <p>Otherwise, remove <var>report</var> from <var>reports</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>For each (<var>endpoint</var>, <var>report list</var>) pair in <var>endpoint map</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>origin map</var> be an empty map of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin" id="ref-for-origin②">origins</a> to
  lists of <a data-link-type="dfn" href="#report" id="ref-for-report①⑥">report</a> objects.</p>
       <li data-md>
        <p>For each <var>report</var> in <var>report list</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>origin</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin" id="ref-for-origin③">origin</a> of <var>report</var>’s <a data-link-type="dfn" href="#report-url" id="ref-for-report-url②">url</a>.</p>
         <li data-md>
          <p>Append <var>report</var> to <var>origin map</var>’s list of reports for <var>origin</var>.</p>
        </ol>
       <li data-md>
        <p>For each (<var>origin</var>, <var>per-origin reports</var>) pair in <var>origin map</var>,
  execute the following steps asynchronously:</p>
        <ol>
         <li data-md>
          <p>Let <var>result</var> be the result of executing <a href="#try-delivery">§ 3.5.2 Attempt to deliver reports to endpoint</a> on <var>endpoint</var>, <var>origin</var>, and <var>per-origin reports</var>.</p>
         <li data-md>
          <p>If <var>result</var> is "<code>Failure</code>":</p>
          <ol>
           <li data-md>
            <p>Increment <var>endpoint</var>’s <code class="idl"><a data-link-type="idl" href="#dom-endpoint-failures" id="ref-for-dom-endpoint-failures①">failures</a></code>.</p>
          </ol>
         <li data-md>
          <p>If <var>result</var> is "<code>Remove Endpoint</code>":</p>
          <ol>
           <li data-md>
            <p>Remove <var>endpoint</var> from <var>context</var>’s <a data-link-type="dfn" href="#windoworworkerglobalscope-endpoints" id="ref-for-windoworworkerglobalscope-endpoints②">endpoints</a> list.</p>
          </ol>
         <li data-md>
          <p>Remove each <a data-link-type="dfn" href="#report" id="ref-for-report①⑦">report</a> from <var>reports</var>.</p>
        </ol>
        <p class="issue" id="issue-7f6dd3bd"><a class="self-link" href="#issue-7f6dd3bd"></a> We don’t specify any retry mechanism here for failed reports.
  We may want to add one here, or provide some indication that the
  delivery failed.</p>
      </ol>
    </ol>
    <p class="note" role="note"><span>Note:</span> User agents MAY decide to attempt delivery for only a subset of the
  collected reports or endpoints (because, for example, sending all the reports
  at once would consume an unreasonable amount of bandwidth, etc). As reports
  are only removed from the cache after delivery has been attempted, skipped
  reports will simply be delivered later.</p>
    <h4 class="heading settled algorithm" data-algorithm="Attempt to deliver reports to endpoint" data-level="3.5.2" id="try-delivery"><span class="secno">3.5.2. </span><span class="content"> Attempt to deliver <var>reports</var> to <var>endpoint</var> </span><a class="self-link" href="#try-delivery"></a></h4>
    <p>Given an <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint①③">endpoint</a> (<var>endpoint</var>), an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin" id="ref-for-origin④">origin</a> (<var>origin</var>), and a list of <a data-link-type="dfn" href="#windoworworkerglobalscope-reports" id="ref-for-windoworworkerglobalscope-reports⑤">reports</a> (<var>reports</var>), this algorithm will
  construct a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request①">request</a>, and attempt to deliver it to <var>endpoint</var>. It
  returns "<code>Success</code>" if that delivery succeeds, "<code>Remove Endpoint</code>" if the
  endpoint explicitly removes itself as a reporting endpoint by sending a 410
  response, and "<code>Failure</code>" otherwise.</p>
    <ol>
     <li data-md>
      <p>Let <var>body</var> be the result of executing <a data-link-type="dfn" href="#serialize-a-list-of-reports-to-json" id="ref-for-serialize-a-list-of-reports-to-json">serialize a list of reports to
  JSON</a> on <var>reports</var>.</p>
     <li data-md>
      <p>Let <var>request</var> be a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request②">request</a> with the following properties <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a>:</p>
      <dl>
       <dt data-md><code>url</code>
       <dd data-md>
        <p><var>endpoint</var>’s <code class="idl"><a data-link-type="idl" href="#dom-endpoint-url" id="ref-for-dom-endpoint-url①">url</a></code></p>
       <dt data-md><code>origin</code>
       <dd data-md>
        <p><var>origin</var></p>
       <dt data-md><code>header list</code>
       <dd data-md>
        <p>A new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list" id="ref-for-concept-header-list">header list</a> containing a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header①">header</a> named
  "<code>Content-Type</code>" whose value is "<code>application/reports+json</code>"</p>
       <dt data-md><code>client</code>
       <dd data-md>
        <p><code>null</code></p>
       <dt data-md><code>window</code>
       <dd data-md>
        <p>"<code>no-window</code>"</p>
       <dt data-md><code>service-worker mode</code>
       <dd data-md>
        <p>"<code>none</code>"</p>
       <dt data-md><code>initiator</code>
       <dd data-md>
        <p>""</p>
       <dt data-md><code>destination</code>
       <dd data-md>
        <p>"<code>report</code>"</p>
       <dt data-md><code>mode</code>
       <dd data-md>
        <p>"<code>cors</code>"</p>
       <dt data-md><code>unsafe-request</code> flag
       <dd data-md>
        <p>set</p>
       <dt data-md><code>credentials</code>
       <dd data-md>
        <p>"<code>same-origin</code>"</p>
       <dt data-md><code>body</code>
       <dd data-md>
        <p>A <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body" id="ref-for-concept-body">body</a> whose <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body-source" id="ref-for-concept-body-source">source</a> is <var>body</var>.</p>
      </dl>
      <p class="note" role="note"><span>Note:</span> Reports are sent with credentials set to <code>same-origin</code>. This allows
  reporting endpoints which are same-origin with the reporting page to get
  extra context about the nature of the report: for example, to understand
  whether a given user’s account is triggering errors consistently, or if a
  certain sequence of actions taken on other pages is triggering a report on
  this page. This does not leak any new information to the reporting
  endpoint that it could not obtain in other ways. That is not the case for
  cross-origin reporting endpoints, so they do not receive credentials.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task">Queue a task</a> to <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch">fetch</a> <var>request</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#wait-for-a-response" id="ref-for-wait-for-a-response">Wait for a response</a> (<var>response</var>).</p>
     <li data-md>
      <p>If <var>response</var>’s <code>status</code> is an <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#ok-status" id="ref-for-ok-status">OK status</a> (200-299), return
  "<code>Success</code>".</p>
     <li data-md>
      <p>If <var>response</var>’s <code>status</code> is <code>410 Gone</code> <a data-link-type="biblio" href="#biblio-rfc7231">[RFC7231]</a>, return "<code>Remove Endpoint</code>".</p>
     <li data-md>
      <p>Return "<code>Failure</code>".</p>
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="4" id="observers"><span class="secno">4. </span><span class="content">Reporting Observers</span><a class="self-link" href="#observers"></a></h2>
    <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="reporting-observer">reporting observer</dfn> observes some types of <a data-link-type="dfn" href="#windoworworkerglobalscope-reports" id="ref-for-windoworworkerglobalscope-reports⑥">reports</a> from
  JavaScript, and is represented in JavaScript by the <code class="idl"><a data-link-type="idl" href="#reportingobserver" id="ref-for-reportingobserver">ReportingObserver</a></code> object.</p>
    <p>Each object implementing <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope⑤">WindowOrWorkerGlobalScope</a></code> has a <dfn class="dfn-paneled" data-dfn-for="WindowOrWorkerGlobalScope" data-dfn-type="dfn" data-noexport id="windoworworkerglobalscope-registered-reporting-observer-list">registered reporting observer list</dfn>,
  which is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">ordered set</a> of <a data-link-type="dfn" href="#reporting-observer" id="ref-for-reporting-observer③">reporting observers</a>.</p>
    <p>Any <a data-link-type="dfn" href="#reporting-observer" id="ref-for-reporting-observer④">reporting observer</a> that is in a <a data-link-type="dfn" href="#windoworworkerglobalscope-registered-reporting-observer-list" id="ref-for-windoworworkerglobalscope-registered-reporting-observer-list">registered reporting observer
  list</a> is considered <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="registered">registered</dfn>.</p>
    <p>Each object implementing <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope⑥">WindowOrWorkerGlobalScope</a></code> has a <dfn class="dfn-paneled" data-dfn-for="WindowOrWorkerGlobalScope" data-dfn-type="dfn" data-noexport id="windoworworkerglobalscope-report-buffer">report buffer</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of <a data-link-type="dfn" href="#windoworworkerglobalscope-reports" id="ref-for-windoworworkerglobalscope-reports⑦">reports</a> that have been generated in that <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope⑦">WindowOrWorkerGlobalScope</a></code>. This list is initially empty, and the reports
  are stored in the same order in which they are generated.</p>
    <p class="note" role="note"><span>Note:</span> The purpose of the <a data-link-type="dfn" href="#windoworworkerglobalscope-report-buffer" id="ref-for-windoworworkerglobalscope-report-buffer">report buffer</a> is to allow <a data-link-type="dfn" href="#reporting-observer" id="ref-for-reporting-observer⑤">reporting
  observers</a> to observe reports that were generated earlier than that
  observer could be created (via the <code class="idl"><a data-link-type="idl" href="#dom-reportingobserveroptions-buffered" id="ref-for-dom-reportingobserveroptions-buffered">buffered</a></code> option). For example, some
  reports might be generated during an earlier stage of page loading than when
  an observer could first be created, or before a JavaScript library is loaded
  that wishes to observe these reports.</p>
    <p class="note" role="note"><span>Note:</span> Reporting observers are only relevant for user agents with
  JavaScript engines.</p>
    <h3 class="heading settled" data-level="4.1" id="interface-reporting-observer"><span class="secno">4.1. </span><span class="content">Interface <code class="idl"><a data-link-type="idl" href="#reportingobserver" id="ref-for-reportingobserver①">ReportingObserver</a></code></span><a class="self-link" href="#interface-reporting-observer"></a></h3>
    <div class="mdn-anno wrapped after">
     <button class="mdn-anno-btn"><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></button>
     <div class="feature">
      <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ReportingObserver" title="The ReportingObserver interface of the Reporting API allows you to collect and access reports.">ReportingObserver</a></p>
      <p class="less-than-two-engines-text">In only one current engine.</p>
      <div class="support">
       <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>69+</span></span>
       <hr>
       <span class="opera yes"><span>Opera</span><span>56+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
       <hr>
       <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
       <hr>
       <span class="firefox_android no"><span>Firefox for Android</span><span>None</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android yes"><span>Chrome for Android</span><span>69+</span></span><span class="webview_android yes"><span>Android WebView</span><span>69+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>10.0+</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>48+</span></span>
      </div>
     </div>
    </div>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="reportbody"><code><c- g>ReportBody</c-></code></dfn> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Default" id="ref-for-Default"><c- g>Default</c-></a>] <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-object" id="ref-for-idl-object"><c- b>object</c-></a> <dfn class="idl-code" data-dfn-for="ReportBody" data-dfn-type="method" data-export data-lt="toJSON()" id="dom-reportbody-tojson"><code><c- g>toJSON</c-></code><a class="self-link" href="#dom-reportbody-tojson"></a></dfn>();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#dom-report" id="ref-for-dom-report"><c- g>Report</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Default" id="ref-for-Default①"><c- g>Default</c-></a>] <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-object" id="ref-for-idl-object①"><c- b>object</c-></a> <dfn class="idl-code" data-dfn-for="Report" data-dfn-type="method" data-export data-lt="toJSON()" id="dom-report-tojson"><code><c- g>toJSON</c-></code><a class="self-link" href="#dom-report-tojson"></a></dfn>();
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-report-type" id="ref-for-dom-report-type"><c- g>type</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-report-url" id="ref-for-dom-report-url"><c- g>url</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#reportbody" id="ref-for-reportbody"><c- n>ReportBody</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="ReportBody?" href="#dom-report-body" id="ref-for-dom-report-body"><c- g>body</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="reportingobserver"><code><c- g>ReportingObserver</c-></code></dfn> {
  <a class="idl-code" data-link-type="constructor" href="#dom-reportingobserver-reportingobserver" id="ref-for-dom-reportingobserver-reportingobserver"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="#callbackdef-reportingobservercallback" id="ref-for-callbackdef-reportingobservercallback"><c- n>ReportingObserverCallback</c-></a> <dfn class="idl-code" data-dfn-for="ReportingObserver/ReportingObserver(callback, options), ReportingObserver/constructor(callback, options), ReportingObserver/ReportingObserver(callback), ReportingObserver/constructor(callback)" data-dfn-type="argument" data-export id="dom-reportingobserver-reportingobserver-callback-options-callback"><code><c- g>callback</c-></code><a class="self-link" href="#dom-reportingobserver-reportingobserver-callback-options-callback"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-reportingobserveroptions" id="ref-for-dictdef-reportingobserveroptions"><c- n>ReportingObserverOptions</c-></a> <dfn class="idl-code" data-dfn-for="ReportingObserver/ReportingObserver(callback, options), ReportingObserver/constructor(callback, options), ReportingObserver/ReportingObserver(callback), ReportingObserver/constructor(callback)" data-dfn-type="argument" data-export id="dom-reportingobserver-reportingobserver-callback-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-reportingobserver-reportingobserver-callback-options-options"></a></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-reportingobserver-observe" id="ref-for-dom-reportingobserver-observe"><c- g>observe</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-reportingobserver-disconnect" id="ref-for-dom-reportingobserver-disconnect"><c- g>disconnect</c-></a>();
  <a data-link-type="idl-name" href="#typedefdef-reportlist" id="ref-for-typedefdef-reportlist"><c- n>ReportList</c-></a> <a class="idl-code" data-link-type="method" href="#dom-reportingobserver-takerecords" id="ref-for-dom-reportingobserver-takerecords"><c- g>takeRecords</c-></a>();
};

<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-reportingobservercallback"><code><c- g>ReportingObserverCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a> (<a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dom-report" id="ref-for-dom-report①"><c- n>Report</c-></a>> <dfn class="idl-code" data-dfn-for="ReportingObserverCallback" data-dfn-type="argument" data-export id="dom-reportingobservercallback-reports"><code><c- g>reports</c-></code><a class="self-link" href="#dom-reportingobservercallback-reports"></a></dfn>, <a data-link-type="idl-name" href="#reportingobserver" id="ref-for-reportingobserver②"><c- n>ReportingObserver</c-></a> <dfn class="idl-code" data-dfn-for="ReportingObserverCallback" data-dfn-type="argument" data-export id="dom-reportingobservercallback-observer"><code><c- g>observer</c-></code><a class="self-link" href="#dom-reportingobservercallback-observer"></a></dfn>);

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-reportingobserveroptions"><code><c- g>ReportingObserverOptions</c-></code></dfn> {
  <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ReportingObserverOptions" data-dfn-type="dict-member" data-export data-type="sequence<DOMString> " id="dom-reportingobserveroptions-types"><code><c- g>types</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="ReportingObserverOptions" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-reportingobserveroptions-buffered"><code><c- g>buffered</c-></code></dfn> = <c- b>false</c->;
};

<c- b>typedef</c-> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dom-report" id="ref-for-dom-report②"><c- n>Report</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-reportlist"><code><c- g>ReportList</c-></code></dfn>;
</pre>
    <p>A <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="dom-report"><code>Report</code></dfn> is the application exposed
  representation of a <a data-link-type="dfn" href="#report" id="ref-for-report①⑧">report</a>. <dfn class="dfn-paneled idl-code" data-dfn-for="Report" data-dfn-type="attribute" data-export id="dom-report-type"><code>type</code></dfn> returns <a data-link-type="dfn" href="#report-reporttype" id="ref-for-report-reporttype③">type</a>, <dfn class="dfn-paneled idl-code" data-dfn-for="Report" data-dfn-type="attribute" data-export id="dom-report-url"><code>url</code></dfn> returns <a data-link-type="dfn" href="#report-url" id="ref-for-report-url③">url</a>, and <dfn class="dfn-paneled idl-code" data-dfn-for="Report" data-dfn-type="attribute" data-export id="dom-report-body"><code>body</code></dfn> returns <a data-link-type="dfn" href="#report-body" id="ref-for-report-body④">body</a>.</p>
    <p>Each <code class="idl"><a data-link-type="idl" href="#reportingobserver" id="ref-for-reportingobserver③">ReportingObserver</a></code> object has these associated concepts:</p>
    <ul>
     <li data-md>
      <p>A <dfn class="dfn-paneled" data-dfn-for="ReportingObserver" data-dfn-type="dfn" data-noexport id="reportingobserver-callback">callback</dfn> function set on creation.</p>
     <li data-md>
      <p>A <code class="idl"><a data-link-type="idl" href="#dictdef-reportingobserveroptions" id="ref-for-dictdef-reportingobserveroptions①">ReportingObserverOptions</a></code> dictionary called <dfn class="dfn-paneled" data-dfn-for="ReportingObserver" data-dfn-type="dfn" data-noexport id="reportingobserver-options">options</dfn>.</p>
     <li data-md>
      <p>A list of <code class="idl"><a data-link-type="idl" href="#dom-report" id="ref-for-dom-report③">Report</a></code> objects called the <dfn class="dfn-paneled" data-dfn-for="ReportingObserver" data-dfn-type="dfn" data-lt="report queue" data-noexport id="reportingobserver-report-queue">report
queue</dfn>, which is initially empty.</p>
    </ul>
    <p>A <code class="idl"><a data-link-type="idl" href="#typedefdef-reportlist" id="ref-for-typedefdef-reportlist①">ReportList</a></code> represents a sequence of <code class="idl"><a data-link-type="idl" href="#dom-report" id="ref-for-dom-report④">Report</a></code>s, providing developers
  with all the convenience methods found on JavaScript arrays.</p>
    <div class="mdn-anno wrapped">
     <button class="mdn-anno-btn"><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></button>
     <div class="feature">
      <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ReportingObserver/ReportingObserver" title="The ReportingObserver() constructor of the Reporting API creates a new ReportingObserver object instance, which can be used to collect and access reports.">ReportingObserver/ReportingObserver</a></p>
      <p class="less-than-two-engines-text">In only one current engine.</p>
      <div class="support">
       <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>69+</span></span>
       <hr>
       <span class="opera yes"><span>Opera</span><span>56+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
       <hr>
       <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
       <hr>
       <span class="firefox_android no"><span>Firefox for Android</span><span>None</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android yes"><span>Chrome for Android</span><span>69+</span></span><span class="webview_android yes"><span>Android WebView</span><span>69+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>10.0+</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>48+</span></span>
      </div>
     </div>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="ReportingObserver" data-dfn-type="constructor" data-export data-lt="ReportingObserver(callback, options)|constructor(callback, options)|ReportingObserver(callback)|constructor(callback)" id="dom-reportingobserver-reportingobserver"><code> ReportingObserver(<var>callback</var>, <var>options</var>)</code></dfn> constructor, when
  invoked, must run these steps:</p>
    <ol>
     <li data-md>
      <p>Create a new <code class="idl"><a data-link-type="idl" href="#reportingobserver" id="ref-for-reportingobserver④">ReportingObserver</a></code> object <var>observer</var>.</p>
     <li data-md>
      <p>Set <var>observer</var>’s <a data-link-type="dfn" href="#reportingobserver-callback" id="ref-for-reportingobserver-callback">callback</a> to <var>callback</var>.</p>
     <li data-md>
      <p>Set <var>observer</var>’s <a data-link-type="dfn" href="#reportingobserver-options" id="ref-for-reportingobserver-options">options</a> to <var>options</var>.</p>
     <li data-md>
      <p>Return <var>observer</var>.</p>
    </ol>
    <div class="mdn-anno wrapped">
     <button class="mdn-anno-btn"><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></button>
     <div class="feature">
      <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ReportingObserver/observe" title="The observe() method of the ReportingObserver interface instructs a reporting observer to start collecting reports in its report queue.">ReportingObserver/observe</a></p>
      <p class="less-than-two-engines-text">In only one current engine.</p>
      <div class="support">
       <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>69+</span></span>
       <hr>
       <span class="opera yes"><span>Opera</span><span>56+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
       <hr>
       <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
       <hr>
       <span class="firefox_android no"><span>Firefox for Android</span><span>None</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android yes"><span>Chrome for Android</span><span>69+</span></span><span class="webview_android yes"><span>Android WebView</span><span>69+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>10.0+</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>48+</span></span>
      </div>
     </div>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="ReportingObserver" data-dfn-type="method" data-export id="dom-reportingobserver-observe"><code>observe()</code></dfn> method, when invoked, must run these steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>global</var> be the be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a> of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object">context
 object</a>.</p>
     <li data-md>
      <p>Append the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①">context object</a> to the <var>global</var>’s <a data-link-type="dfn" href="#windoworworkerglobalscope-registered-reporting-observer-list" id="ref-for-windoworworkerglobalscope-registered-reporting-observer-list①">registered reporting
 observer list</a>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②">context object</a>’s <code class="idl"><a data-link-type="idl" href="#dom-reportingobserveroptions-buffered" id="ref-for-dom-reportingobserveroptions-buffered①">buffered</a></code> <a data-link-type="dfn" href="#reportingobserver-options" id="ref-for-reportingobserver-options①">option</a> is false, return.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③">context object</a>’s <code class="idl"><a data-link-type="idl" href="#dom-reportingobserveroptions-buffered" id="ref-for-dom-reportingobserveroptions-buffered②">buffered</a></code> <a data-link-type="dfn" href="#reportingobserver-options" id="ref-for-reportingobserver-options②">option</a> to false.</p>
     <li data-md>
      <p>For each <var>report</var> in <var>global</var>’s <a data-link-type="dfn" href="#windoworworkerglobalscope-report-buffer" id="ref-for-windoworworkerglobalscope-report-buffer①">report buffer</a>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task①">queue a task</a> to execute <a href="#add-report">§ 4.3 Add report to observer</a> with <var>report</var> and the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object④">context object</a>.</p>
    </ol>
    <div class="mdn-anno wrapped">
     <button class="mdn-anno-btn"><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></button>
     <div class="feature">
      <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ReportingObserver/disconnect" title="The disconnect() method of the ReportingObserver interface stops a reporting observer that had previously started observing from collecting reports.">ReportingObserver/disconnect</a></p>
      <p class="less-than-two-engines-text">In only one current engine.</p>
      <div class="support">
       <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>69+</span></span>
       <hr>
       <span class="opera yes"><span>Opera</span><span>56+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
       <hr>
       <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
       <hr>
       <span class="firefox_android no"><span>Firefox for Android</span><span>None</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android yes"><span>Chrome for Android</span><span>69+</span></span><span class="webview_android yes"><span>Android WebView</span><span>69+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>10.0+</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>48+</span></span>
      </div>
     </div>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="ReportingObserver" data-dfn-type="method" data-export id="dom-reportingobserver-disconnect"><code>disconnect()</code></dfn> method,
  when invoked, must run these steps:</p>
    <ol>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object⑤">context object</a> is not <a data-link-type="dfn" href="#registered" id="ref-for-registered">registered</a>, return.</p>
     <li data-md>
      <p>Let <var>global</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①">relevant global object</a> of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object⑥">context
 object</a>.</p>
     <li data-md>
      <p>Remove the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object⑦">context object</a> from <var>global</var>’s <a data-link-type="dfn" href="#windoworworkerglobalscope-registered-reporting-observer-list" id="ref-for-windoworworkerglobalscope-registered-reporting-observer-list②">registered reporting
 observer list</a>.</p>
    </ol>
    <div class="mdn-anno wrapped">
     <button class="mdn-anno-btn"><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></button>
     <div class="feature">
      <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ReportingObserver/takeRecords" title="The takeRecords() method of the ReportingObserver interface returns the current list of reports contained in the observer&apos;s report queue, and empties the queue.">ReportingObserver/takeRecords</a></p>
      <p class="less-than-two-engines-text">In only one current engine.</p>
      <div class="support">
       <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>69+</span></span>
       <hr>
       <span class="opera yes"><span>Opera</span><span>56+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
       <hr>
       <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
       <hr>
       <span class="firefox_android no"><span>Firefox for Android</span><span>None</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android yes"><span>Chrome for Android</span><span>69+</span></span><span class="webview_android yes"><span>Android WebView</span><span>69+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>10.0+</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>48+</span></span>
      </div>
     </div>
    </div>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="ReportingObserver" data-dfn-type="method" data-export id="dom-reportingobserver-takerecords"><code>takeRecords()</code></dfn> method,
  when invoked, must run these steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>reports</var> be a copy of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object⑧">context object</a>’s <a data-link-type="dfn" href="#reportingobserver-report-queue" id="ref-for-reportingobserver-report-queue">report queue</a>.</p>
     <li data-md>
      <p>Empty the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object⑨">context object</a>’s <a data-link-type="dfn" href="#reportingobserver-report-queue" id="ref-for-reportingobserver-report-queue①">report queue</a>.</p>
     <li data-md>
      <p>Return <var>reports</var>.</p>
    </ol>
    <h3 class="heading settled algorithm" data-algorithm="Notify reporting observers on scope with report" data-level="4.2" id="notify-observers"><span class="secno">4.2. </span><span class="content"> Notify reporting observers on <var>scope</var> with <var>report</var> </span><a class="self-link" href="#notify-observers"></a></h3>
    <p>This algorithm makes <var>report</var>’s contents available to any <a data-link-type="dfn" href="#registered" id="ref-for-registered①">registered</a> <a data-link-type="dfn" href="#reporting-observer" id="ref-for-reporting-observer⑥">reporting observers</a> on the provided <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope" id="ref-for-windoworworkerglobalscope⑧">WindowOrWorkerGlobalScope</a></code>.</p>
    <ol>
     <li data-md>
      <p>For each <code class="idl"><a data-link-type="idl" href="#reportingobserver" id="ref-for-reportingobserver⑤">ReportingObserver</a></code> <var>observer</var> <a data-link-type="dfn" href="#registered" id="ref-for-registered②">registered</a> with <var>scope</var>,
 execute <a href="#add-report">§ 4.3 Add report to observer</a> on <var>report</var> and <var>observer</var>.</p>
     <li data-md>
      <p>Append <var>report</var> to <var>scope</var>’s <a data-link-type="dfn" href="#windoworworkerglobalscope-report-buffer" id="ref-for-windoworworkerglobalscope-report-buffer②">report buffer</a>.</p>
     <li data-md>
      <p>Let <var>type</var> be <var>report</var>’s <a data-link-type="dfn" href="#report-reporttype" id="ref-for-report-reporttype④">type</a>.</p>
     <li data-md>
      <p>If <var>scope</var>’s <a data-link-type="dfn" href="#windoworworkerglobalscope-report-buffer" id="ref-for-windoworworkerglobalscope-report-buffer③">report buffer</a> now contains more than 100 reports with <a data-link-type="dfn" href="#report-reporttype" id="ref-for-report-reporttype⑤">type</a> equal to <var>type</var>, remove the earliest item with <a data-link-type="dfn" href="#report-reporttype" id="ref-for-report-reporttype⑥">type</a> equal to <var>type</var> in the <a data-link-type="dfn" href="#windoworworkerglobalscope-report-buffer" id="ref-for-windoworworkerglobalscope-report-buffer④">report buffer</a>.</p>
    </ol>
    <h3 class="heading settled algorithm" data-algorithm="Add report to observer" data-level="4.3" id="add-report"><span class="secno">4.3. </span><span class="content"> Add <var>report</var> to <var>observer</var> </span><a class="self-link" href="#add-report"></a></h3>
    <p>Given a <a data-link-type="dfn" href="#report" id="ref-for-report①⑨">report</a> <var>report</var> and a <code class="idl"><a data-link-type="idl" href="#reportingobserver" id="ref-for-reportingobserver⑥">ReportingObserver</a></code> <var>observer</var>, this
  algorithm adds <var>report</var> to <var>observer</var>’s <a data-link-type="dfn" href="#reportingobserver-report-queue" id="ref-for-reportingobserver-report-queue②">report queue</a>, so long as <var>report</var>’s <a data-link-type="dfn" href="#report-reporttype" id="ref-for-report-reporttype⑦">type</a> is observable by <var>observer</var>.</p>
    <ol>
     <li data-md>
      <p>If <var>report</var>’s <a data-link-type="dfn" href="#report-reporttype" id="ref-for-report-reporttype⑧">type</a> is not <a data-link-type="dfn" href="#visible-to-reportingobservers" id="ref-for-visible-to-reportingobservers①">visible to <code>ReportingObserver</code>s</a>, return.</p>
     <li data-md>
      <p>If <var>observer</var>’s <a data-link-type="dfn" href="#reportingobserver-options" id="ref-for-reportingobserver-options③">options</a> has a non-empty <code class="idl"><a data-link-type="idl" href="#dom-reportingobserveroptions-types" id="ref-for-dom-reportingobserveroptions-types">types</a></code> member which does not contain <var>report</var>’s <a data-link-type="dfn" href="#report-reporttype" id="ref-for-report-reporttype⑨">type</a>, return.</p>
     <li data-md>
      <p>Create a new <code class="idl"><a data-link-type="idl" href="#dom-report" id="ref-for-dom-report⑤">Report</a></code> <var>r</var> with <code class="idl"><a data-link-type="idl" href="#dom-report-type" id="ref-for-dom-report-type①">type</a></code> initialized to <var>report</var>’s <a data-link-type="dfn" href="#report-reporttype" id="ref-for-report-reporttype①⓪">type</a>, <code class="idl"><a data-link-type="idl" href="#dom-report-url" id="ref-for-dom-report-url①">url</a></code> initialized to <var>report</var>’s <a data-link-type="dfn" href="#report-url" id="ref-for-report-url④">url</a>,
 and <code class="idl"><a data-link-type="idl" href="#dom-report-body" id="ref-for-dom-report-body①">body</a></code> initialized to <var>report</var>’s <a data-link-type="dfn" href="#report-body" id="ref-for-report-body⑤">body</a>.</p>
    </ol>
    <p class="issue" id="issue-6311d126"><a class="self-link" href="#issue-6311d126"></a> how to polymorphically initialize body?</p>
    <ol start="3">
     <li data-md>
      <p>Append <var>r</var> to <var>observer</var>’s <a data-link-type="dfn" href="#reportingobserver-report-queue" id="ref-for-reportingobserver-report-queue③">report queue</a>.</p>
     <li data-md>
      <p>If the size of <var>observer</var>’s <a data-link-type="dfn" href="#reportingobserver-report-queue" id="ref-for-reportingobserver-report-queue④">report queue</a> is 1:</p>
      <ol>
       <li data-md>
        <p>Let <var>global</var> be <var>observer</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②">relevant global object</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task②">Queue a task</a> to <a href="#invoke-observers">§ 4.4 Invoke reporting observers with notify list</a> with a copy of <var>global</var>’s <a data-link-type="dfn" href="#windoworworkerglobalscope-registered-reporting-observer-list" id="ref-for-windoworworkerglobalscope-registered-reporting-observer-list③">registered reporting observer list</a>.</p>
      </ol>
    </ol>
    <h3 algorthm class="heading settled" data-level="4.4" id="invoke-observers"><span class="secno">4.4. </span><span class="content"> Invoke reporting observers with <var>notify list</var> </span><a class="self-link" href="#invoke-observers"></a></h3>
    <p>This algorithm invokes observer callback functions for reports of previously
  observed behavior.</p>
    <ol>
     <li data-md>
      <p>For each <code class="idl"><a data-link-type="idl" href="#reportingobserver" id="ref-for-reportingobserver⑦">ReportingObserver</a></code> <var>observer</var> in <var>notify list</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>observer</var>’s <a data-link-type="dfn" href="#reportingobserver-report-queue" id="ref-for-reportingobserver-report-queue⑤">report queue</a> is empty, then continue.</p>
       <li data-md>
        <p>Let <var>reports</var> be a copy of <var>observer</var>’s <a data-link-type="dfn" href="#reportingobserver-report-queue" id="ref-for-reportingobserver-report-queue⑥">report queue</a></p>
       <li data-md>
        <p>Empty <var>observer</var>’s <a data-link-type="dfn" href="#reportingobserver-report-queue" id="ref-for-reportingobserver-report-queue⑦">report queue</a></p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function">Invoke</a> <var>observer</var>’s <a data-link-type="dfn" href="#reportingobserver-callback" id="ref-for-reportingobserver-callback①">callback</a> with a list of
  arguments consisting of <var>reports</var> and <var>observer</var>, and <var>observer</var> as the <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-callback-this-value" id="ref-for-dfn-callback-this-value">callback this value</a>.  If this throws an exception, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception" id="ref-for-report-the-exception">report the
  exception</a>.</p>
      </ol>
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="5" id="implementation"><span class="secno">5. </span><span class="content">Implementation Considerations</span><a class="self-link" href="#implementation"></a></h2>
    <h3 class="heading settled" data-level="5.1" id="delivery"><span class="secno">5.1. </span><span class="content">Delivery</span><a class="self-link" href="#delivery"></a></h3>
    <p>The user agent SHOULD attempt to deliver reports as soon as possible to
  provide feedback to developers as quickly as possible. However, when this
  desire is balanced against the impact on the user, the user wins. With that
  in mind, the user agent MAY delay delivery of reports based on its knowledge
  of the user’s activities and context.</p>
    <p>For instance, the user agent SHOULD prioritize the transmission of reporting
  data lower than other network traffic. The user’s explicit activities on a
  website should preempt reporting traffic.</p>
    <p>The user agent MAY choose to withhold report delivery entirely until the user
  is on a fast, cheap network in order to prevent unnecessary data cost.</p>
    <p>The user agent MAY choose to prioritize reports from particular origins over
  others (perhaps those that the user visits most often?)</p>
    <h3 class="heading settled" data-level="5.2" id="gc"><span class="secno">5.2. </span><span class="content">Garbage Collection</span><a class="self-link" href="#gc"></a></h3>
    <p>Periodically, the user agent SHOULD walk through the cached <a data-link-type="dfn" href="#report" id="ref-for-report②⓪">reports</a> and <a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint①④">endpoints</a>, and discard those that are
  no longer relevant. These include:</p>
    <ul>
     <li data-md>
      <p><a data-link-type="dfn" href="#endpoint" id="ref-for-endpoint①⑤">endpoints</a> whose <code class="idl"><a data-link-type="idl" href="#dom-endpoint-failures" id="ref-for-dom-endpoint-failures②">failures</a></code> exceed
  some user-agent-defined threshold (~5 seems reasonable)</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#report" id="ref-for-report②①">reports</a> which have not been delivered in some arbitrary
  period of time (perhaps ~2 days?)</p>
    </ul>
    <p>For any <a data-link-type="dfn" href="#report" id="ref-for-report②②">reports</a> that are discarded, these <a data-link-type="dfn" href="#windoworworkerglobalscope-reports" id="ref-for-windoworworkerglobalscope-reports⑧">reports</a> should
  also be removed from the <a data-link-type="dfn" href="#windoworworkerglobalscope-report-buffer" id="ref-for-windoworworkerglobalscope-report-buffer⑤">report buffer</a> of any <a data-link-type="dfn" href="#reporting-observer" id="ref-for-reporting-observer⑦">reporting
  observer</a>.</p>
   </section>
   <section class="non-normative">
    <h2 class="heading settled" data-level="6" id="sample-reports"><span class="secno">6. </span><span class="content">Sample Reports</span><a class="self-link" href="#sample-reports"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p>This example shows the format in which reports are sent by the user agent to
  the reporting endpoint. The sample submission contains three reports which
  have been bundled together and sent in a single HTTP request. (The report
  types and bodies themselves are not intended to be representative of any
  actual feature, as those are outside of the scope of this specification).</p>
    <div class="example" id="example-3cfcdab2">
     <a class="self-link" href="#example-3cfcdab2"></a> 
<pre>POST / HTTP/1.1
Host: example.com
...
Content-Type: application/reports+json

[{
  "type": "security-violation",
  "age": 10,
  "url": "https://example.com/vulnerable-page/",
  "user_agent": "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0",
  "body": {
    "blocked": "https://evil.com/evil.js",
    "policy": "bad-behavior 'none'",
    "status": 200,
    "referrer": "https://evil.com/"
  }
}, {
  "type": "certificate-issue",
  "age": 32,
  "url": "https://www.example.com/",
  "user_agent": "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0",
  "body": {
    "date-time": "2014-04-06T13:00:50Z",
    "hostname": "www.example.com",
    "port": 443,
    "effective-expiration-date": "2014-05-01T12:40:50Z",
    "served-certificate-chain": [
      "-----BEGIN CERTIFICATE-----\n
      MIIEBDCCAuygAwIBAgIDAjppMA0GCSqGSIb3DQEBBQUAMEIxCzAJBgNVBAYTAlVT\n
      ...
      HFa9llF7b1cq26KqltyMdMKVvvBulRP/F/A8rLIQjcxz++iPAsbw+zOzlTvjwsto\n
      WHPbqCRiOwY1nQ2pM714A5AuTHhdUDqB1O6gyHA43LL5Z/qHQF1hwFGPa4NrzQU6\n
      yuGnBXj8ytqU0CwIPX4WecigUCAkVDNx\n
      -----END CERTIFICATE-----",
      ...
    ]
  }
}, {
  "type": "cpu-on-fire",
  "age": 29,
  "url": "https://example.com/thing.js",
  "user_agent": "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0",
  "body": {
    "temperature": 614.0
  }
}]
</pre>
    </div>
   </section>
   <section>
    <h2 class="heading settled" data-level="7" id="automation"><span class="secno">7. </span><span class="content">Automation</span><a class="self-link" href="#automation"></a></h2>
    <p>For the purposes of user-agent automation and application testing, this
  document defines a number of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-extension-command" id="ref-for-dfn-extension-command">extension commands</a> for the <a data-link-type="biblio" href="#biblio-webdriver">[WebDriver]</a> specification.</p>
    <h3 class="heading settled" data-level="7.1" id="generate-test-report-command"><span class="secno">7.1. </span><span class="content">Generate Test Report</span><a class="self-link" href="#generate-test-report-command"></a></h3>
    <p>The <dfn data-dfn-type="dfn" data-noexport id="generate-test-report">Generate Test Report<a class="self-link" href="#generate-test-report"></a></dfn> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-extension-command" id="ref-for-dfn-extension-command①">extension command</a> simulates the
  generation of a <a data-link-type="dfn" href="#report" id="ref-for-report②③">report</a> for the purposes of testing. This report will be
  observed by any <a data-link-type="dfn" href="#registered" id="ref-for-registered③">registered</a> <a data-link-type="dfn" href="#reporting-observer" id="ref-for-reporting-observer⑧">reporting observers</a>.</p>
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-extension-command" id="ref-for-dfn-extension-command②">extension command</a> is defined as follows:</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="idl-code" data-dfn-type="dictionary" data-export id="dictdef-generatetestreportparameters"><code><c- g>GenerateTestReportParameters</c-></code><a class="self-link" href="#dictdef-generatetestreportparameters"></a></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="GenerateTestReportParameters" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-generatetestreportparameters-message"><code><c- g>message</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;default&quot;" data-dfn-for="GenerateTestReportParameters" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-generatetestreportparameters-group"><code><c- g>group</c-></code></dfn> = "default";
};
</pre>
    <table style="border-spacing: 20px 0px;">
     <tbody>
      <tr>
       <th>HTTP Method
       <th><a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-extension-command-uri-template" id="ref-for-dfn-extension-command-uri-template">URI Template</a>
      <tr>
       <td><code>POST</code>
       <td><code>/session/{session id}/reporting/generate_test_report</code>
    </table>
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps">remote end steps</a> are:</p>
    <ol>
     <li data-md>
      <p>If <var>parameters</var> is not a JSON <a data-link-type="dfn" href="https://w3c.github.io/FileAPI/#blob-url-entry-object" id="ref-for-blob-url-entry-object">Object</a>, return a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error" id="ref-for-dfn-error">WebDriver
 error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code">WebDriver error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument">invalid argument</a>.</p>
     <li data-md>
      <p>Let <var>message</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try">trying</a> to get <var>parameters</var>’s <code class="idl"><a data-link-type="idl" href="#dom-generatetestreportparameters-message" id="ref-for-dom-generatetestreportparameters-message">message</a></code> property.</p>
     <li data-md>
      <p>If <var>message</var> is not present, return a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error" id="ref-for-dfn-error①">WebDriver error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①">WebDriver error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①">invalid argument</a>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-current-browsing-context" id="ref-for-dfn-current-browsing-context">current browsing context</a> is no longer open, return a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error" id="ref-for-dfn-error②">WebDriver error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②">WebDriver error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-no-such-window" id="ref-for-dfn-no-such-window">no such
 window</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-handle-any-user-prompts" id="ref-for-dfn-handle-any-user-prompts">Handle any user prompts</a> and return its value if it is a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error" id="ref-for-dfn-error③">WebDriver
 error</a>.</p>
     <li data-md>
      <p>Let <var>group</var> be <var>parameters</var>’s <code class="idl"><a data-link-type="idl" href="#dom-generatetestreportparameters-group" id="ref-for-dom-generatetestreportparameters-group">group</a></code> property.</p>
     <li data-md>
      <p>Let <var>body</var> be a new object that can be serialized into a <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc8259#section-2" id="ref-for-section-2①">JSON text</a>,
 containing a single string field, <var>body_message</var>.</p>
     <li data-md>
      <p>Set <var>body_message</var> to <var>message</var>.</p>
     <li data-md>
      <p>Let <var>settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object②">environment settings object</a> of the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-current-browsing-context" id="ref-for-dfn-current-browsing-context①">current browsing context</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document">active document</a>.</p>
     <li data-md>
      <p>Execute <a href="#queue-report">§ 2.3 Queue data as type for destination</a> with <var>body</var>, "test", <var>group</var>, and <var>settings</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success">success</a> with data null.</p>
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="8" id="security"><span class="secno">8. </span><span class="content">Security Considerations</span><a class="self-link" href="#security"></a></h2>
    <h3 class="heading settled" data-level="8.1" id="capability-urls"><span class="secno">8.1. </span><span class="content">Capability URLs</span><a class="self-link" href="#capability-urls"></a></h3>
    <p>Some URLs are valuable in and of themselves. To mitigate the possibility
  that such URLs will be leaked via this reporting mechanism, we strip out
  credential information and fragment data from the URL we store as a <a data-link-type="dfn" href="#report" id="ref-for-report②④">report</a>’s originator. It is still possible, however, for a feature
  to unintentionally leak such data via a report’s <a data-link-type="dfn" href="#report-body" id="ref-for-report-body⑥">body</a>. Implementers
  SHOULD ensure that URLs contained in a report’s body are similarly stripped.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="9" id="privacy"><span class="secno">9. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy"></a></h2>
    <h3 class="heading settled" data-level="9.1" id="network-leakage"><span class="secno">9.1. </span><span class="content">Network Leakage</span><a class="self-link" href="#network-leakage"></a></h3>
    <p>Because there is a delay between a page being loaded and a report being
  generated and sent, it’s entirely possible for a report generated while a user
  is on one network to be sent while the user is on another network.</p>
    <p>This behaviour is limited to the lifetime of the document which generated the
  reports, though, and such a document could be generating traffic on the new
  network through other means in any case, even after the document is closed,
  through mechanisms such as <code>navigator.sendBeacon</code>.</p>
    <p class="issue" id="issue-acba119f"><a class="self-link" href="#issue-acba119f"></a> Consider mitigations. For example, we could
  drop reports if we change from one network to another. <a href="https://github.com/w3c/BackgroundSync/issues/107">&lt;https://github.com/w3c/BackgroundSync/issues/107></a></p>
    <h3 class="heading settled" data-level="9.2" id="fingerprinting-clock-skew"><span class="secno">9.2. </span><span class="content">Clock Skew</span><a class="self-link" href="#fingerprinting-clock-skew"></a></h3>
    <p>Each report is delivered along with an <code>age</code> property, rather than the
  timestamp at which it was generated. We do this because each user’s local
  clock will be skewed from the clock on the server by an arbitrary amount.
  The difference between the time the report was generated and the time it
  was sent will be stable, regardless of clock skew, and we can avoid the
  fingerprinting risk of exposing the clock skew via this API.</p>
    <h3 class="heading settled" data-level="9.3" id="correlation"><span class="secno">9.3. </span><span class="content">Cross-origin correlation</span><a class="self-link" href="#correlation"></a></h3>
    <p>If multiple origins all use the same reporting endpoint, that endpoint may
  learn that a particular user has interacted with a certain set of websites,
  as it will receive origin-tagged reports from each. This doesn’t seem worse
  than the status quo ability to track the same information from cooperative
  origins, and doesn’t grant any new tracking ability above and beyond what’s
  possible with <code>&lt;img></code> today.</p>
    <h3 class="heading settled" data-level="9.4" id="disable"><span class="secno">9.4. </span><span class="content">Disabling Reporting</span><a class="self-link" href="#disable"></a></h3>
    <p>Reporting is, to some extent, a question of commons. In the aggregate, it
  seems useful for everyone for reports to be delivered. There is direct benefit
  to developers, as they can fix bugs, which means there’s indirect benefit to
  users, as the sites they enjoy will be more stable and enjoyable. As a
  concrete example, Content Security Policy grants something like herd immunity
  to cross-site scripting attacks by alerting developers about potential holes
  in their sites' defenses. Fixing those bugs helps every user, even those whose
  user agents don’t support Content Security Policy.</p>
    <p>The calculus, of course, depends on the nature of data that’s being delivered,
  and the relative maliciousness of the reporting endpoints, but that’s the
  value proposition in broad strokes.</p>
    <p>That said, it can’t be the case that this general benefit be allowed to take
  priority over the ability of a user to individually opt-out of such a system.
  Sending reports costs bandwidth, and potentially could reveal some small
  amount of additional information above and beyond what a website can obtain
  in-band (<a data-link-type="biblio" href="#biblio-network-error-logging">[NETWORK-ERROR-LOGGING]</a>, for instance). User agents MUST allow
  users to disable reporting with some reasonable amount of granularity in order
  to maintain the priority of constituencies espoused in <a data-link-type="biblio" href="#biblio-html-design-principles">[HTML-DESIGN-PRINCIPLES]</a>.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="10" id="iana-considerations"><span class="secno">10. </span><span class="content">IANA Considerations</span><a class="self-link" href="#iana-considerations"></a></h2>
    <h3 class="heading settled" data-level="10.1" id="header-field-registration"><span class="secno">10.1. </span><span class="content">The <code>Reporting-Endpoints</code> Header</span><a class="self-link" href="#header-field-registration"></a></h3>
    <p>The permanent message header field registry should be updated
  with the following registration: <a data-link-type="biblio" href="#biblio-rfc3864">[RFC3864]</a></p>
    <dl>
     <dt data-md>Header field name
     <dd data-md>
      <p><code>Reporting-Endpoints</code></p>
     <dt data-md>Applicable protocol
     <dd data-md>
      <p>http</p>
     <dt data-md>Status
     <dd data-md>
      <p>standard</p>
     <dt data-md>Author/Change controller
     <dd data-md>
      <p>W3C</p>
     <dt data-md>Specification document
     <dd data-md>
      <p>This specification (see <a href="#header">§ 3.2 The Reporting-Endpoints HTTP Response Header Field</a>)</p>
    </dl>
    <h3 class="heading settled" data-level="10.2" id="media-type-registration"><span class="secno">10.2. </span><span class="content">The <code>application/reports+json</code> Media Type</span><a class="self-link" href="#media-type-registration"></a></h3>
    <dl>
     <dt data-md>Type name
     <dd data-md>
      <p>application</p>
     <dt data-md>Subtype name
     <dd data-md>
      <p>reports+json</p>
     <dt data-md>Required parameters
     <dd data-md>
      <p>N/A</p>
     <dt data-md>Optional parameters
     <dd data-md>
      <p>N/A</p>
     <dt data-md>Encoding considerations
     <dd data-md>
      <p>Encoding considerations are identical to those specified for the "application/json" media type. See <a data-link-type="biblio" href="#biblio-rfc8259">[RFC8259]</a>.</p>
     <dt data-md>Security considerations
     <dd data-md>
      <p>See <a href="#security">§ 8 Security Considerations</a>.</p>
     <dt data-md>Interoperability considerations
     <dd data-md>
      <p>This document specifies the format of conforming messages and the interpretation thereof.</p>
     <dt data-md>Published specification
     <dd data-md>
      <p><a href="#media-type">§ 2.2 Media Type</a></p>
     <dt data-md>Applications that use this media type
     <dt data-md>Fragment identifier considerations
     <dt data-md>Additional information
     <dd data-md>
      <p>N/A</p>
     <dt data-md>Person and email address to contact for further information
     <dd data-md>
      <p>This document’s editors.</p>
     <dt data-md>Intended usage:
     <dd data-md>
      <p>COMMON</p>
     <dt data-md>Restrictions on usage:
     <dd data-md>
      <p>N/A</p>
     <dt data-md>Author
     <dd data-md>
      <p>This document’s editors.</p>
     <dt data-md>Change controller
     <dd data-md>
      <p>W3C</p>
     <dt data-md>Provisional registration?
     <dd data-md>
      <p>Yes.</p>
    </dl>
   </section>
  </main>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#report-attempts">attempts</a><span>, in §2.1.3</span>
   <li>
    body
    <ul>
     <li><a href="#dom-report-body">attribute for Report</a><span>, in §4.1</span>
     <li><a href="#report-body">dfn for report</a><span>, in §2.1.3</span>
    </ul>
   <li><a href="#dom-reportingobserveroptions-buffered">buffered</a><span>, in §4.1</span>
   <li><a href="#reportingobserver-callback">callback</a><span>, in §4.1</span>
   <li><a href="#dom-reportingobserver-reportingobserver">constructor(callback)</a><span>, in §4.1</span>
   <li><a href="#dom-reportingobserver-reportingobserver">constructor(callback, options)</a><span>, in §4.1</span>
   <li><a href="#report-destination">destination</a><span>, in §2.1.3</span>
   <li><a href="#dom-reportingobserver-disconnect">disconnect()</a><span>, in §4.1</span>
   <li><a href="#endpoint">endpoint</a><span>, in §2.1.1</span>
   <li><a href="#windoworworkerglobalscope-endpoints">endpoints</a><span>, in §3.1</span>
   <li><a href="#dom-endpoint-failures">failures</a><span>, in §2.1.1</span>
   <li><a href="#generate-a-report">generate a report</a><span>, in §3.4.1</span>
   <li><a href="#generate-test-report">Generate Test Report</a><span>, in §7.1</span>
   <li><a href="#dictdef-generatetestreportparameters">GenerateTestReportParameters</a><span>, in §7.1</span>
   <li><a href="#dom-generatetestreportparameters-group">group</a><span>, in §7.1</span>
   <li><a href="#initialize-a-globals-endpoint-list">initialize a global’s endpoint list</a><span>, in §3.1</span>
   <li><a href="#dom-generatetestreportparameters-message">message</a><span>, in §7.1</span>
   <li><a href="#dom-endpoint-name">name</a><span>, in §2.1.1</span>
   <li><a href="#dom-reportingobserver-observe">observe()</a><span>, in §4.1</span>
   <li><a href="#reportingobserver-options">options</a><span>, in §4.1</span>
   <li><a href="#reporting-queue">queue</a><span>, in §2.3</span>
   <li><a href="#registered">registered</a><span>, in §4</span>
   <li><a href="#windoworworkerglobalscope-registered-reporting-observer-list">registered reporting observer list</a><span>, in §4</span>
   <li><a href="#dom-report">Report</a><span>, in §4.1</span>
   <li><a href="#report">report</a><span>, in §2.1.3</span>
   <li><a href="#reportbody">ReportBody</a><span>, in §4.1</span>
   <li><a href="#windoworworkerglobalscope-report-buffer">report buffer</a><span>, in §4</span>
   <li><a href="#reporting-endpoints">Reporting-Endpoints</a><span>, in §3.2</span>
   <li><a href="#reporting-observer">reporting observer</a><span>, in §4</span>
   <li><a href="#reportingobserver">ReportingObserver</a><span>, in §4.1</span>
   <li><a href="#dom-reportingobserver-reportingobserver">ReportingObserver(callback)</a><span>, in §4.1</span>
   <li><a href="#callbackdef-reportingobservercallback">ReportingObserverCallback</a><span>, in §4.1</span>
   <li><a href="#dom-reportingobserver-reportingobserver">ReportingObserver(callback, options)</a><span>, in §4.1</span>
   <li><a href="#dictdef-reportingobserveroptions">ReportingObserverOptions</a><span>, in §4.1</span>
   <li><a href="#typedefdef-reportlist">ReportList</a><span>, in §4.1</span>
   <li><a href="#reportingobserver-report-queue">report queue</a><span>, in §4.1</span>
   <li><a href="#windoworworkerglobalscope-reports">reports</a><span>, in §3.1</span>
   <li><a href="#report-type">report type</a><span>, in §2.1.2</span>
   <li><a href="#serialize-a-list-of-reports-to-json">serialize a list of reports to JSON</a><span>, in §2.4</span>
   <li><a href="#dom-reportingobserver-takerecords">takeRecords()</a><span>, in §4.1</span>
   <li><a href="#report-timestamp">timestamp</a><span>, in §2.1.3</span>
   <li>
    toJSON()
    <ul>
     <li><a href="#dom-report-tojson">method for Report</a><span>, in §4.1</span>
     <li><a href="#dom-reportbody-tojson">method for ReportBody</a><span>, in §4.1</span>
    </ul>
   <li>
    type
    <ul>
     <li><a href="#dom-report-type">attribute for Report</a><span>, in §4.1</span>
     <li><a href="#report-reporttype">dfn for report</a><span>, in §2.1.3</span>
    </ul>
   <li><a href="#dom-reportingobserveroptions-types">types</a><span>, in §4.1</span>
   <li>
    url
    <ul>
     <li><a href="#dom-report-url">attribute for Report</a><span>, in §4.1</span>
     <li><a href="#dom-endpoint-url">attribute for endpoint</a><span>, in §2.1.1</span>
     <li><a href="#report-url">dfn for report</a><span>, in §2.1.3</span>
    </ul>
   <li><a href="#report-user-agent">user agent</a><span>, in §2.1.3</span>
   <li><a href="#visible-to-reportingobservers">visible to ReportingObservers</a><span>, in §2.1.2</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-content-security-policy">
   <a href="https://w3c.github.io/webappsec-csp/#content-security-policy">https://w3c.github.io/webappsec-csp/#content-security-policy</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-content-security-policy">1.2. Examples</a> <a href="#ref-for-content-security-policy①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-directives-reporting">
   <a href="https://w3c.github.io/webappsec-csp/#directives-reporting">https://w3c.github.io/webappsec-csp/#directives-reporting</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-directives-reporting">1.2. Examples</a> <a href="#ref-for-directives-reporting①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-context-object">
   <a href="https://dom.spec.whatwg.org/#context-object">https://dom.spec.whatwg.org/#context-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-context-object">4.1. Interface ReportingObserver</a> <a href="#ref-for-context-object①">(2)</a> <a href="#ref-for-context-object②">(3)</a> <a href="#ref-for-context-object③">(4)</a> <a href="#ref-for-context-object④">(5)</a> <a href="#ref-for-context-object⑤">(6)</a> <a href="#ref-for-context-object⑥">(7)</a> <a href="#ref-for-context-object⑦">(8)</a> <a href="#ref-for-context-object⑧">(9)</a> <a href="#ref-for-context-object⑨">(10)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-document">
   <a href="https://dom.spec.whatwg.org/#concept-document">https://dom.spec.whatwg.org/#concept-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-document">3.4.1. Generate report of type with
  data</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-response-https-state">
   <a href="https://fetch.spec.whatwg.org/#concept-response-https-state">https://fetch.spec.whatwg.org/#concept-response-https-state</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-response-https-state">3.3. 
    Process reporting endpoints for response </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-body">
   <a href="https://fetch.spec.whatwg.org/#concept-body">https://fetch.spec.whatwg.org/#concept-body</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-body">3.5.2. 
    Attempt to deliver reports to endpoint </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-fetch">
   <a href="https://fetch.spec.whatwg.org/#concept-fetch">https://fetch.spec.whatwg.org/#concept-fetch</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-fetch">3.5.2. 
    Attempt to deliver reports to endpoint </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-header-list-get-structured-header">
   <a href="https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header">https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-header-list-get-structured-header">3.3. 
    Process reporting endpoints for response </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-header">
   <a href="https://fetch.spec.whatwg.org/#concept-header">https://fetch.spec.whatwg.org/#concept-header</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-header">2.1.3. Reports</a>
    <li><a href="#ref-for-concept-header①">3.5.2. 
    Attempt to deliver reports to endpoint </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-response-header-list">
   <a href="https://fetch.spec.whatwg.org/#concept-response-header-list">https://fetch.spec.whatwg.org/#concept-response-header-list</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-response-header-list">3.3. 
    Process reporting endpoints for response </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-ok-status">
   <a href="https://fetch.spec.whatwg.org/#ok-status">https://fetch.spec.whatwg.org/#ok-status</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ok-status">3.5.2. 
    Attempt to deliver reports to endpoint </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-request">
   <a href="https://fetch.spec.whatwg.org/#concept-request">https://fetch.spec.whatwg.org/#concept-request</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-request">2.1.3. Reports</a>
    <li><a href="#ref-for-concept-request①">3.5.2. 
    Attempt to deliver reports to endpoint </a> <a href="#ref-for-concept-request②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-response">
   <a href="https://fetch.spec.whatwg.org/#concept-response">https://fetch.spec.whatwg.org/#concept-response</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-response">3.1. Document configuration</a>
    <li><a href="#ref-for-concept-response①">3.3. 
    Process reporting endpoints for response </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-body-source">
   <a href="https://fetch.spec.whatwg.org/#concept-body-source">https://fetch.spec.whatwg.org/#concept-body-source</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-body-source">3.5.2. 
    Attempt to deliver reports to endpoint </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-response-url">
   <a href="https://fetch.spec.whatwg.org/#concept-response-url">https://fetch.spec.whatwg.org/#concept-response-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-response-url">3.3. 
    Process reporting endpoints for response </a> <a href="#ref-for-concept-response-url①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-wait-for-a-response">
   <a href="https://fetch.spec.whatwg.org/#wait-for-a-response">https://fetch.spec.whatwg.org/#wait-for-a-response</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-wait-for-a-response">3.5.2. 
    Attempt to deliver reports to endpoint </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-blob-url-entry-object">
   <a href="https://w3c.github.io/FileAPI/#blob-url-entry-object">https://w3c.github.io/FileAPI/#blob-url-entry-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-blob-url-entry-object">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-windoworworkerglobalscope">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope">https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-windoworworkerglobalscope">2.3. 
    Queue data as type for destination </a>
    <li><a href="#ref-for-windoworworkerglobalscope①">3.1. Document configuration</a> <a href="#ref-for-windoworworkerglobalscope②">(2)</a> <a href="#ref-for-windoworworkerglobalscope③">(3)</a>
    <li><a href="#ref-for-windoworworkerglobalscope④">3.5.1. Send reports</a>
    <li><a href="#ref-for-windoworworkerglobalscope⑤">4. Reporting Observers</a> <a href="#ref-for-windoworworkerglobalscope⑥">(2)</a> <a href="#ref-for-windoworworkerglobalscope⑦">(3)</a>
    <li><a href="#ref-for-windoworworkerglobalscope⑧">4.2. 
    Notify reporting observers on scope with report </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-workerglobalscope">
   <a href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-workerglobalscope">3.4.1. Generate report of type with
  data</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-active-document">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">https://html.spec.whatwg.org/multipage/browsers.html#active-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-document">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-creation-url">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#creation-url">https://html.spec.whatwg.org/multipage/webappapis.html#creation-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-creation-url">2.3. 
    Queue data as type for destination </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-environment-settings-object">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-environment-settings-object">2.3. 
    Queue data as type for destination </a> <a href="#ref-for-environment-settings-object①">(2)</a>
    <li><a href="#ref-for-environment-settings-object②">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-settings-object-global">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global">https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-settings-object-global">2.3. 
    Queue data as type for destination </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-navigator-useragent">
   <a href="https://html.spec.whatwg.org/multipage/system-state.html#dom-navigator-useragent">https://html.spec.whatwg.org/multipage/system-state.html#dom-navigator-useragent</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-navigator-useragent">2.3. 
    Queue data as type for destination </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-origin">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#origin">https://html.spec.whatwg.org/multipage/browsers.html#origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-origin">2.1.1. Endpoints</a>
    <li><a href="#ref-for-origin①">3.3. 
    Process reporting endpoints for response </a>
    <li><a href="#ref-for-origin②">3.5.1. Send reports</a> <a href="#ref-for-origin③">(2)</a>
    <li><a href="#ref-for-origin④">3.5.2. 
    Attempt to deliver reports to endpoint </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-queue-a-task">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-queue-a-task">3.5.2. 
    Attempt to deliver reports to endpoint </a>
    <li><a href="#ref-for-queue-a-task①">4.1. Interface ReportingObserver</a>
    <li><a href="#ref-for-queue-a-task②">4.3. 
    Add report to observer </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-relevant-global">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-relevant-global">4.1. Interface ReportingObserver</a> <a href="#ref-for-concept-relevant-global①">(2)</a>
    <li><a href="#ref-for-concept-relevant-global②">4.3. 
    Add report to observer </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-relevant-settings-object">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-relevant-settings-object">3.4.1. Generate report of type with
  data</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-report-the-exception">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception">https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report-the-exception">4.4. 
    Invoke reporting observers with notify list </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-byte-sequence">
   <a href="https://infra.spec.whatwg.org/#byte-sequence">https://infra.spec.whatwg.org/#byte-sequence</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-byte-sequence">2.4. Serialize Reports</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-iteration-continue">
   <a href="https://infra.spec.whatwg.org/#iteration-continue">https://infra.spec.whatwg.org/#iteration-continue</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iteration-continue">3.3. 
    Process reporting endpoints for response </a> <a href="#ref-for-iteration-continue①">(2)</a> <a href="#ref-for-iteration-continue②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list">
   <a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list">4. Reporting Observers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-ordered-set">
   <a href="https://infra.spec.whatwg.org/#ordered-set">https://infra.spec.whatwg.org/#ordered-set</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ordered-set">4. Reporting Observers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-serialize-a-javascript-value-to-json-bytes">
   <a href="https://infra.spec.whatwg.org/#serialize-a-javascript-value-to-json-bytes">https://infra.spec.whatwg.org/#serialize-a-javascript-value-to-json-bytes</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-serialize-a-javascript-value-to-json-bytes">2.4. Serialize Reports</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-section-2.1">
   <a href="https://tools.ietf.org/html/rfc7469#section-2.1">https://tools.ietf.org/html/rfc7469#section-2.1</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-section-2.1">1.2. Examples</a> <a href="#ref-for-section-2.1①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-section-2">
   <a href="https://tools.ietf.org/html/rfc8259#section-2">https://tools.ietf.org/html/rfc8259#section-2</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-section-2">2.1.3. Reports</a>
    <li><a href="#ref-for-section-2①">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-is-origin-trustworthy">
   <a href="https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy">https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-is-origin-trustworthy">3.2. The Reporting-Endpoints HTTP Response Header Field</a>
    <li><a href="#ref-for-is-origin-trustworthy①">3.3. 
    Process reporting endpoints for response </a> <a href="#ref-for-is-origin-trustworthy②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-rfc.section.3.2">
   <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html#rfc.section.3.2">https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html#rfc.section.3.2</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-rfc.section.3.2">3.2. The Reporting-Endpoints HTTP Response Header Field</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url">
   <a href="https://url.spec.whatwg.org/#concept-url">https://url.spec.whatwg.org/#concept-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url">2.1.1. Endpoints</a>
    <li><a href="#ref-for-concept-url①">2.3. 
    Queue data as type for destination </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-base-url">
   <a href="https://url.spec.whatwg.org/#concept-base-url">https://url.spec.whatwg.org/#concept-base-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-base-url">3.3. 
    Process reporting endpoints for response </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-origin">
   <a href="https://url.spec.whatwg.org/#concept-url-origin">https://url.spec.whatwg.org/#concept-url-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-origin">3.3. 
    Process reporting endpoints for response </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-password">
   <a href="https://url.spec.whatwg.org/#concept-url-password">https://url.spec.whatwg.org/#concept-url-password</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-password">2.3. 
    Queue data as type for destination </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-parser">
   <a href="https://url.spec.whatwg.org/#concept-url-parser">https://url.spec.whatwg.org/#concept-url-parser</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-parser">3.3. 
    Process reporting endpoints for response </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-serializer">
   <a href="https://url.spec.whatwg.org/#concept-url-serializer">https://url.spec.whatwg.org/#concept-url-serializer</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-serializer">2.3. 
    Queue data as type for destination </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-username">
   <a href="https://url.spec.whatwg.org/#concept-url-username">https://url.spec.whatwg.org/#concept-url-username</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-username">2.3. 
    Queue data as type for destination </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-current-browsing-context">
   <a href="https://w3c.github.io/webdriver/#dfn-current-browsing-context">https://w3c.github.io/webdriver/#dfn-current-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-current-browsing-context">7.1. Generate Test Report</a> <a href="#ref-for-dfn-current-browsing-context①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-extension-command">
   <a href="https://w3c.github.io/webdriver/#dfn-extension-command">https://w3c.github.io/webdriver/#dfn-extension-command</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-extension-command">7. Automation</a>
    <li><a href="#ref-for-dfn-extension-command①">7.1. Generate Test Report</a> <a href="#ref-for-dfn-extension-command②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-extension-command-uri-template">
   <a href="https://w3c.github.io/webdriver/#dfn-extension-command-uri-template">https://w3c.github.io/webdriver/#dfn-extension-command-uri-template</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-extension-command-uri-template">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-handle-any-user-prompts">
   <a href="https://w3c.github.io/webdriver/#dfn-handle-any-user-prompts">https://w3c.github.io/webdriver/#dfn-handle-any-user-prompts</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-handle-any-user-prompts">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-invalid-argument">
   <a href="https://w3c.github.io/webdriver/#dfn-invalid-argument">https://w3c.github.io/webdriver/#dfn-invalid-argument</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-invalid-argument">7.1. Generate Test Report</a> <a href="#ref-for-dfn-invalid-argument①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-no-such-window">
   <a href="https://w3c.github.io/webdriver/#dfn-no-such-window">https://w3c.github.io/webdriver/#dfn-no-such-window</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-no-such-window">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-remote-end-steps">
   <a href="https://w3c.github.io/webdriver/#dfn-remote-end-steps">https://w3c.github.io/webdriver/#dfn-remote-end-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-remote-end-steps">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-success">
   <a href="https://w3c.github.io/webdriver/#dfn-success">https://w3c.github.io/webdriver/#dfn-success</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-success">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-try">
   <a href="https://w3c.github.io/webdriver/#dfn-try">https://w3c.github.io/webdriver/#dfn-try</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-try">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-error">
   <a href="https://w3c.github.io/webdriver/#dfn-error">https://w3c.github.io/webdriver/#dfn-error</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-error">7.1. Generate Test Report</a> <a href="#ref-for-dfn-error①">(2)</a> <a href="#ref-for-dfn-error②">(3)</a> <a href="#ref-for-dfn-error③">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-error-code">
   <a href="https://w3c.github.io/webdriver/#dfn-error-code">https://w3c.github.io/webdriver/#dfn-error-code</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-error-code">7.1. Generate Test Report</a> <a href="#ref-for-dfn-error-code①">(2)</a> <a href="#ref-for-dfn-error-code②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-DOMString">
   <a href="https://heycam.github.io/webidl/#idl-DOMString">https://heycam.github.io/webidl/#idl-DOMString</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-DOMString">4.1. Interface ReportingObserver</a> <a href="#ref-for-idl-DOMString①">(2)</a> <a href="#ref-for-idl-DOMString②">(3)</a>
    <li><a href="#ref-for-idl-DOMString③">7.1. Generate Test Report</a> <a href="#ref-for-idl-DOMString④">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-Default">
   <a href="https://heycam.github.io/webidl/#Default">https://heycam.github.io/webidl/#Default</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-Default">4.1. Interface ReportingObserver</a> <a href="#ref-for-Default①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-Exposed">
   <a href="https://heycam.github.io/webidl/#Exposed">https://heycam.github.io/webidl/#Exposed</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-Exposed">4.1. Interface ReportingObserver</a> <a href="#ref-for-Exposed①">(2)</a> <a href="#ref-for-Exposed②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-boolean">
   <a href="https://heycam.github.io/webidl/#idl-boolean">https://heycam.github.io/webidl/#idl-boolean</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-boolean">4.1. Interface ReportingObserver</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-callback-this-value">
   <a href="https://heycam.github.io/webidl/#dfn-callback-this-value">https://heycam.github.io/webidl/#dfn-callback-this-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-callback-this-value">4.4. 
    Invoke reporting observers with notify list </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-invoke-a-callback-function">
   <a href="https://heycam.github.io/webidl/#invoke-a-callback-function">https://heycam.github.io/webidl/#invoke-a-callback-function</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invoke-a-callback-function">4.4. 
    Invoke reporting observers with notify list </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-object">
   <a href="https://heycam.github.io/webidl/#idl-object">https://heycam.github.io/webidl/#idl-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-object">4.1. Interface ReportingObserver</a> <a href="#ref-for-idl-object①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-sequence">
   <a href="https://heycam.github.io/webidl/#idl-sequence">https://heycam.github.io/webidl/#idl-sequence</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-sequence">4.1. Interface ReportingObserver</a> <a href="#ref-for-idl-sequence①">(2)</a> <a href="#ref-for-idl-sequence②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-undefined">
   <a href="https://heycam.github.io/webidl/#idl-undefined">https://heycam.github.io/webidl/#idl-undefined</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-undefined">4.1. Interface ReportingObserver</a> <a href="#ref-for-idl-undefined①">(2)</a> <a href="#ref-for-idl-undefined②">(3)</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CSP3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-content-security-policy">content-security-policy</span>
     <li><span class="dfn-paneled" id="term-for-directives-reporting">reports directive</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-context-object">context object</span>
     <li><span class="dfn-paneled" id="term-for-concept-document">document</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-concept-response-https-state">HTTPS state</span>
     <li><span class="dfn-paneled" id="term-for-concept-body">body</span>
     <li><span class="dfn-paneled" id="term-for-concept-fetch">fetch</span>
     <li><span class="dfn-paneled" id="term-for-concept-header-list-get-structured-header">get a structured field value</span>
     <li><span class="dfn-paneled" id="term-for-concept-header">header</span>
     <li><span class="dfn-paneled" id="term-for-concept-response-header-list">header list <small>(for response)</small></span>
     <li><span class="dfn-paneled" id="term-for-ok-status">ok status</span>
     <li><span class="dfn-paneled" id="term-for-concept-request">request</span>
     <li><span class="dfn-paneled" id="term-for-concept-response">response</span>
     <li><span class="dfn-paneled" id="term-for-concept-body-source">source</span>
     <li><span class="dfn-paneled" id="term-for-concept-response-url">url</span>
     <li><span class="dfn-paneled" id="term-for-wait-for-a-response">wait for a response</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FileAPI]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-blob-url-entry-object">object</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-windoworworkerglobalscope">WindowOrWorkerGlobalScope</span>
     <li><span class="dfn-paneled" id="term-for-workerglobalscope">WorkerGlobalScope</span>
     <li><span class="dfn-paneled" id="term-for-active-document">active document</span>
     <li><span class="dfn-paneled" id="term-for-creation-url">creation url</span>
     <li><span class="dfn-paneled" id="term-for-environment-settings-object">environment settings object</span>
     <li><span class="dfn-paneled" id="term-for-concept-settings-object-global">global object</span>
     <li><span class="dfn-paneled" id="term-for-dom-navigator-useragent">navigator.useragent</span>
     <li><span class="dfn-paneled" id="term-for-origin">origin</span>
     <li><span class="dfn-paneled" id="term-for-queue-a-task">queue a task</span>
     <li><span class="dfn-paneled" id="term-for-concept-relevant-global">relevant global object</span>
     <li><span class="dfn-paneled" id="term-for-relevant-settings-object">relevant settings object</span>
     <li><span class="dfn-paneled" id="term-for-report-the-exception">report the exception</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-byte-sequence">byte sequence</span>
     <li><span class="dfn-paneled" id="term-for-iteration-continue">continue</span>
     <li><span class="dfn-paneled" id="term-for-list">list</span>
     <li><span class="dfn-paneled" id="term-for-ordered-set">ordered set</span>
     <li><span class="dfn-paneled" id="term-for-serialize-a-javascript-value-to-json-bytes">serialize json to bytes</span>
    </ul>
   <li>
    <a data-link-type="biblio">[rfc7469]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-section-2.1">public-key-pins</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RFC8259]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-section-2">json text</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SECURE-CONTEXTS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-is-origin-trustworthy">potentially trustworthy</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STRUCTURED-HEADERS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-rfc.section.3.2">sh-dictionary</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-concept-url">URL</span>
     <li><span class="dfn-paneled" id="term-for-concept-base-url">base url</span>
     <li><span class="dfn-paneled" id="term-for-concept-url-origin">origin of a url</span>
     <li><span class="dfn-paneled" id="term-for-concept-url-password">password</span>
     <li><span class="dfn-paneled" id="term-for-concept-url-parser">url parser</span>
     <li><span class="dfn-paneled" id="term-for-concept-url-serializer">url serializer</span>
     <li><span class="dfn-paneled" id="term-for-concept-url-username">username</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WebDriver]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dfn-current-browsing-context">current browsing context</span>
     <li><span class="dfn-paneled" id="term-for-dfn-extension-command">extension command</span>
     <li><span class="dfn-paneled" id="term-for-dfn-extension-command-uri-template">extension command uri template</span>
     <li><span class="dfn-paneled" id="term-for-dfn-handle-any-user-prompts">handle any user prompts</span>
     <li><span class="dfn-paneled" id="term-for-dfn-invalid-argument">invalid argument</span>
     <li><span class="dfn-paneled" id="term-for-dfn-no-such-window">no such window</span>
     <li><span class="dfn-paneled" id="term-for-dfn-remote-end-steps">remote end steps</span>
     <li><span class="dfn-paneled" id="term-for-dfn-success">success</span>
     <li><span class="dfn-paneled" id="term-for-dfn-try">trying</span>
     <li><span class="dfn-paneled" id="term-for-dfn-error">webdriver error</span>
     <li><span class="dfn-paneled" id="term-for-dfn-error-code">webdriver error code</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WebIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-idl-DOMString">DOMString</span>
     <li><span class="dfn-paneled" id="term-for-Default">Default</span>
     <li><span class="dfn-paneled" id="term-for-Exposed">Exposed</span>
     <li><span class="dfn-paneled" id="term-for-idl-boolean">boolean</span>
     <li><span class="dfn-paneled" id="term-for-dfn-callback-this-value">callback this value</span>
     <li><span class="dfn-paneled" id="term-for-invoke-a-callback-function">invoke</span>
     <li><span class="dfn-paneled" id="term-for-idl-object">object</span>
     <li><span class="dfn-paneled" id="term-for-idl-sequence">sequence</span>
     <li><span class="dfn-paneled" id="term-for-idl-undefined">undefined</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecma-262">[ECMA-262]
   <dd><a href="https://tc39.es/ecma262/">ECMAScript Language Specification</a>. URL: <a href="https://tc39.es/ecma262/">https://tc39.es/ecma262/</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/">Fetch Standard</a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-fileapi">[FileAPI]
   <dd>Marijn Kruisselbrink; Arun Ranganathan. <a href="https://www.w3.org/TR/FileAPI/">File API</a>. 11 September 2019. WD. URL: <a href="https://www.w3.org/TR/FileAPI/">https://www.w3.org/TR/FileAPI/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/">Infra Standard</a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-rfc3864">[RFC3864]
   <dd>G. Klyne; M. Nottingham; J. Mogul. <a href="https://tools.ietf.org/html/rfc3864">Registration Procedures for Message Header Fields</a>. September 2004. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc3864">https://tools.ietf.org/html/rfc3864</a>
   <dt id="biblio-rfc5234">[RFC5234]
   <dd>D. Crocker, Ed.; P. Overell. <a href="https://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>. January 2008. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc5234">https://tools.ietf.org/html/rfc5234</a>
   <dt id="biblio-rfc7231">[RFC7231]
   <dd>R. Fielding, Ed.; J. Reschke, Ed.. <a href="https://httpwg.org/specs/rfc7231.html">Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</a>. June 2014. Proposed Standard. URL: <a href="https://httpwg.org/specs/rfc7231.html">https://httpwg.org/specs/rfc7231.html</a>
   <dt id="biblio-rfc8259">[RFC8259]
   <dd>T. Bray, Ed.. <a href="https://tools.ietf.org/html/rfc8259">The JavaScript Object Notation (JSON) Data Interchange Format</a>. December 2017. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc8259">https://tools.ietf.org/html/rfc8259</a>
   <dt id="biblio-secure-contexts">[SECURE-CONTEXTS]
   <dd>Mike West; Yan Zhu. <a href="https://w3c.github.io/webappsec-secure-contexts/">Secure Contexts</a>. URL: <a href="https://w3c.github.io/webappsec-secure-contexts/">https://w3c.github.io/webappsec-secure-contexts/</a>
   <dt id="biblio-structured-headers">[STRUCTURED-HEADERS]
   <dd>Mark Nottingham; Poul-Henning Kamp. <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html">Structured Field Values for HTTP</a>. URL: <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html">https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/">URL Standard</a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-webdriver">[WebDriver]
   <dd>Simon Stewart; David Burns. <a href="https://www.w3.org/TR/webdriver1/">WebDriver</a>. 5 June 2018. REC. URL: <a href="https://www.w3.org/TR/webdriver1/">https://www.w3.org/TR/webdriver1/</a>
   <dt id="biblio-webidl">[WebIDL]
   <dd>Boris Zbarsky. <a href="https://heycam.github.io/webidl/">Web IDL</a>. 15 December 2016. ED. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-csp3">[CSP3]
   <dd>Mike West. <a href="https://www.w3.org/TR/CSP3/">Content Security Policy Level 3</a>. 15 October 2018. WD. URL: <a href="https://www.w3.org/TR/CSP3/">https://www.w3.org/TR/CSP3/</a>
   <dt id="biblio-html-design-principles">[HTML-DESIGN-PRINCIPLES]
   <dd>Anne van Kesteren; Maciej Stachowiak. <a href="https://www.w3.org/TR/html-design-principles/">HTML Design Principles</a>. 26 November 2007. WD. URL: <a href="https://www.w3.org/TR/html-design-principles/">https://www.w3.org/TR/html-design-principles/</a>
   <dt id="biblio-network-error-logging">[NETWORK-ERROR-LOGGING]
   <dd>Douglas Creager; et al. <a href="https://www.w3.org/TR/network-error-logging-1/">Network Error Logging</a>. 25 September 2018. WD. URL: <a href="https://www.w3.org/TR/network-error-logging-1/">https://www.w3.org/TR/network-error-logging-1/</a>
   <dt id="biblio-rfc7469">[RFC7469]
   <dd>C. Evans; C. Palmer; R. Sleevi. <a href="https://tools.ietf.org/html/rfc7469">Public Key Pinning Extension for HTTP</a>. April 2015. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7469">https://tools.ietf.org/html/rfc7469</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a href="#reportbody"><code><c- g>ReportBody</c-></code></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Default"><c- g>Default</c-></a>] <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-object"><c- b>object</c-></a> <a href="#dom-reportbody-tojson"><code><c- g>toJSON</c-></code></a>();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#dom-report"><c- g>Report</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Default"><c- g>Default</c-></a>] <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-object"><c- b>object</c-></a> <a href="#dom-report-tojson"><code><c- g>toJSON</c-></code></a>();
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-report-type"><c- g>type</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-report-url"><c- g>url</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#reportbody"><c- n>ReportBody</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="ReportBody?" href="#dom-report-body"><c- g>body</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a href="#reportingobserver"><code><c- g>ReportingObserver</c-></code></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-reportingobserver-reportingobserver"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="#callbackdef-reportingobservercallback"><c- n>ReportingObserverCallback</c-></a> <a href="#dom-reportingobserver-reportingobserver-callback-options-callback"><code><c- g>callback</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-reportingobserveroptions"><c- n>ReportingObserverOptions</c-></a> <a href="#dom-reportingobserver-reportingobserver-callback-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-reportingobserver-observe"><c- g>observe</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-reportingobserver-disconnect"><c- g>disconnect</c-></a>();
  <a data-link-type="idl-name" href="#typedefdef-reportlist"><c- n>ReportList</c-></a> <a class="idl-code" data-link-type="method" href="#dom-reportingobserver-takerecords"><c- g>takeRecords</c-></a>();
};

<c- b>callback</c-> <a href="#callbackdef-reportingobservercallback"><code><c- g>ReportingObserverCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> (<a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dom-report"><c- n>Report</c-></a>> <a href="#dom-reportingobservercallback-reports"><code><c- g>reports</c-></code></a>, <a data-link-type="idl-name" href="#reportingobserver"><c- n>ReportingObserver</c-></a> <a href="#dom-reportingobservercallback-observer"><code><c- g>observer</c-></code></a>);

<c- b>dictionary</c-> <a href="#dictdef-reportingobserveroptions"><code><c- g>ReportingObserverOptions</c-></code></a> {
  <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a>> <a data-type="sequence<DOMString> " href="#dom-reportingobserveroptions-types"><code><c- g>types</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-reportingobserveroptions-buffered"><code><c- g>buffered</c-></code></a> = <c- b>false</c->;
};

<c- b>typedef</c-> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dom-report"><c- n>Report</c-></a>> <a href="#typedefdef-reportlist"><code><c- g>ReportList</c-></code></a>;

<c- b>dictionary</c-> <a href="#dictdef-generatetestreportparameters"><code><c- g>GenerateTestReportParameters</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-generatetestreportparameters-message"><code><c- g>message</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a data-default="&quot;default&quot;" data-type="DOMString " href="#dom-generatetestreportparameters-group"><code><c- g>group</c-></code></a> = "default";
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> We don’t specify any retry mechanism here for failed reports.
  We may want to add one here, or provide some indication that the
  delivery failed.<a href="#issue-7f6dd3bd"> ↵ </a></div>
   <div class="issue"> how to polymorphically initialize body?<a href="#issue-6311d126"> ↵ </a></div>
   <div class="issue"> Consider mitigations. For example, we could
  drop reports if we change from one network to another. <a href="https://github.com/w3c/BackgroundSync/issues/107">&lt;https://github.com/w3c/BackgroundSync/issues/107></a><a href="#issue-acba119f"> ↵ </a></div>
  </div>
  <aside class="dfn-panel" data-for="endpoint">
   <b><a href="#endpoint">#endpoint</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-endpoint">2.1.1. Endpoints</a> <a href="#ref-for-endpoint①">(2)</a> <a href="#ref-for-endpoint②">(3)</a>
    <li><a href="#ref-for-endpoint③">2.1.3. Reports</a>
    <li><a href="#ref-for-endpoint④">3.1. Document configuration</a>
    <li><a href="#ref-for-endpoint⑤">3.2. The Reporting-Endpoints HTTP Response Header Field</a> <a href="#ref-for-endpoint⑥">(2)</a> <a href="#ref-for-endpoint⑦">(3)</a> <a href="#ref-for-endpoint⑧">(4)</a>
    <li><a href="#ref-for-endpoint⑨">3.3. 
    Process reporting endpoints for response </a> <a href="#ref-for-endpoint①⓪">(2)</a>
    <li><a href="#ref-for-endpoint①①">3.5.1. Send reports</a> <a href="#ref-for-endpoint①②">(2)</a>
    <li><a href="#ref-for-endpoint①③">3.5.2. 
    Attempt to deliver reports to endpoint </a>
    <li><a href="#ref-for-endpoint①④">5.2. Garbage Collection</a> <a href="#ref-for-endpoint①⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-endpoint-name">
   <b><a href="#dom-endpoint-name">#dom-endpoint-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-endpoint-name">2.1.3. Reports</a>
    <li><a href="#ref-for-dom-endpoint-name①">3.1. Document configuration</a>
    <li><a href="#ref-for-dom-endpoint-name②">3.3. 
    Process reporting endpoints for response </a>
    <li><a href="#ref-for-dom-endpoint-name③">3.5.1. Send reports</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-endpoint-url">
   <b><a href="#dom-endpoint-url">#dom-endpoint-url</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-endpoint-url">3.3. 
    Process reporting endpoints for response </a>
    <li><a href="#ref-for-dom-endpoint-url①">3.5.2. 
    Attempt to deliver reports to endpoint </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-endpoint-failures">
   <b><a href="#dom-endpoint-failures">#dom-endpoint-failures</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-endpoint-failures">3.3. 
    Process reporting endpoints for response </a>
    <li><a href="#ref-for-dom-endpoint-failures①">3.5.1. Send reports</a>
    <li><a href="#ref-for-dom-endpoint-failures②">5.2. Garbage Collection</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="report-type">
   <b><a href="#report-type">#report-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report-type">2.1.2. Report Type</a> <a href="#ref-for-report-type①">(2)</a>
    <li><a href="#ref-for-report-type②">2.1.3. Reports</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="visible-to-reportingobservers">
   <b><a href="#visible-to-reportingobservers">#visible-to-reportingobservers</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-visible-to-reportingobservers">2.1.2. Report Type</a>
    <li><a href="#ref-for-visible-to-reportingobservers①">4.3. 
    Add report to observer </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="report">
   <b><a href="#report">#report</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report">2.1.2. Report Type</a>
    <li><a href="#ref-for-report①">2.1.3. Reports</a> <a href="#ref-for-report②">(2)</a> <a href="#ref-for-report③">(3)</a> <a href="#ref-for-report④">(4)</a> <a href="#ref-for-report⑤">(5)</a> <a href="#ref-for-report⑥">(6)</a> <a href="#ref-for-report⑦">(7)</a> <a href="#ref-for-report⑧">(8)</a> <a href="#ref-for-report⑨">(9)</a> <a href="#ref-for-report①⓪">(10)</a> <a href="#ref-for-report①①">(11)</a>
    <li><a href="#ref-for-report①②">2.3. 
    Queue data as type for destination </a> <a href="#ref-for-report①③">(2)</a>
    <li><a href="#ref-for-report①④">3.1. Document configuration</a>
    <li><a href="#ref-for-report①⑤">3.5.1. Send reports</a> <a href="#ref-for-report①⑥">(2)</a> <a href="#ref-for-report①⑦">(3)</a>
    <li><a href="#ref-for-report①⑧">4.1. Interface ReportingObserver</a>
    <li><a href="#ref-for-report①⑨">4.3. 
    Add report to observer </a>
    <li><a href="#ref-for-report②⓪">5.2. Garbage Collection</a> <a href="#ref-for-report②①">(2)</a> <a href="#ref-for-report②②">(3)</a>
    <li><a href="#ref-for-report②③">7.1. Generate Test Report</a>
    <li><a href="#ref-for-report②④">8.1. Capability URLs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="report-body">
   <b><a href="#report-body">#report-body</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report-body">2.1.2. Report Type</a>
    <li><a href="#ref-for-report-body①">2.1.3. Reports</a>
    <li><a href="#ref-for-report-body②">2.3. 
    Queue data as type for destination </a>
    <li><a href="#ref-for-report-body③">2.4. Serialize Reports</a>
    <li><a href="#ref-for-report-body④">4.1. Interface ReportingObserver</a>
    <li><a href="#ref-for-report-body⑤">4.3. 
    Add report to observer </a>
    <li><a href="#ref-for-report-body⑥">8.1. Capability URLs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="report-url">
   <b><a href="#report-url">#report-url</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report-url">2.3. 
    Queue data as type for destination </a>
    <li><a href="#ref-for-report-url①">2.4. Serialize Reports</a>
    <li><a href="#ref-for-report-url②">3.5.1. Send reports</a>
    <li><a href="#ref-for-report-url③">4.1. Interface ReportingObserver</a>
    <li><a href="#ref-for-report-url④">4.3. 
    Add report to observer </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="report-user-agent">
   <b><a href="#report-user-agent">#report-user-agent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report-user-agent">2.1.3. Reports</a>
    <li><a href="#ref-for-report-user-agent①">2.3. 
    Queue data as type for destination </a>
    <li><a href="#ref-for-report-user-agent②">2.4. Serialize Reports</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="report-destination">
   <b><a href="#report-destination">#report-destination</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report-destination">2.3. 
    Queue data as type for destination </a>
    <li><a href="#ref-for-report-destination①">3.5.1. Send reports</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="report-reporttype">
   <b><a href="#report-reporttype">#report-reporttype</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report-reporttype">2.1.3. Reports</a>
    <li><a href="#ref-for-report-reporttype①">2.3. 
    Queue data as type for destination </a>
    <li><a href="#ref-for-report-reporttype②">2.4. Serialize Reports</a>
    <li><a href="#ref-for-report-reporttype③">4.1. Interface ReportingObserver</a>
    <li><a href="#ref-for-report-reporttype④">4.2. 
    Notify reporting observers on scope with report </a> <a href="#ref-for-report-reporttype⑤">(2)</a> <a href="#ref-for-report-reporttype⑥">(3)</a>
    <li><a href="#ref-for-report-reporttype⑦">4.3. 
    Add report to observer </a> <a href="#ref-for-report-reporttype⑧">(2)</a> <a href="#ref-for-report-reporttype⑨">(3)</a> <a href="#ref-for-report-reporttype①⓪">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="report-timestamp">
   <b><a href="#report-timestamp">#report-timestamp</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report-timestamp">2.3. 
    Queue data as type for destination </a>
    <li><a href="#ref-for-report-timestamp①">2.4. Serialize Reports</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="report-attempts">
   <b><a href="#report-attempts">#report-attempts</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report-attempts">2.3. 
    Queue data as type for destination </a>
    <li><a href="#ref-for-report-attempts①">2.4. Serialize Reports</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="serialize-a-list-of-reports-to-json">
   <b><a href="#serialize-a-list-of-reports-to-json">#serialize-a-list-of-reports-to-json</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-serialize-a-list-of-reports-to-json">3.5.2. 
    Attempt to deliver reports to endpoint </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="windoworworkerglobalscope-endpoints">
   <b><a href="#windoworworkerglobalscope-endpoints">#windoworworkerglobalscope-endpoints</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-windoworworkerglobalscope-endpoints">3.1. Document configuration</a>
    <li><a href="#ref-for-windoworworkerglobalscope-endpoints①">3.5.1. Send reports</a> <a href="#ref-for-windoworworkerglobalscope-endpoints②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="windoworworkerglobalscope-reports">
   <b><a href="#windoworworkerglobalscope-reports">#windoworworkerglobalscope-reports</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-windoworworkerglobalscope-reports">2.1.1. Endpoints</a>
    <li><a href="#ref-for-windoworworkerglobalscope-reports①">2.1.2. Report Type</a>
    <li><a href="#ref-for-windoworworkerglobalscope-reports②">3.4.1. Generate report of type with
  data</a>
    <li><a href="#ref-for-windoworworkerglobalscope-reports③">3.5. Report Delivery</a>
    <li><a href="#ref-for-windoworworkerglobalscope-reports④">3.5.1. Send reports</a>
    <li><a href="#ref-for-windoworworkerglobalscope-reports⑤">3.5.2. 
    Attempt to deliver reports to endpoint </a>
    <li><a href="#ref-for-windoworworkerglobalscope-reports⑥">4. Reporting Observers</a> <a href="#ref-for-windoworworkerglobalscope-reports⑦">(2)</a>
    <li><a href="#ref-for-windoworworkerglobalscope-reports⑧">5.2. Garbage Collection</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reporting-endpoints">
   <b><a href="#reporting-endpoints">#reporting-endpoints</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reporting-endpoints">1.2. Examples</a> <a href="#ref-for-reporting-endpoints①">(2)</a>
    <li><a href="#ref-for-reporting-endpoints②">3.2. The Reporting-Endpoints HTTP Response Header Field</a> <a href="#ref-for-reporting-endpoints③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reporting-observer">
   <b><a href="#reporting-observer">#reporting-observer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reporting-observer">2.1.2. Report Type</a>
    <li><a href="#ref-for-reporting-observer①">2.3. 
    Queue data as type for destination </a> <a href="#ref-for-reporting-observer②">(2)</a>
    <li><a href="#ref-for-reporting-observer③">4. Reporting Observers</a> <a href="#ref-for-reporting-observer④">(2)</a> <a href="#ref-for-reporting-observer⑤">(3)</a>
    <li><a href="#ref-for-reporting-observer⑥">4.2. 
    Notify reporting observers on scope with report </a>
    <li><a href="#ref-for-reporting-observer⑦">5.2. Garbage Collection</a>
    <li><a href="#ref-for-reporting-observer⑧">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="windoworworkerglobalscope-registered-reporting-observer-list">
   <b><a href="#windoworworkerglobalscope-registered-reporting-observer-list">#windoworworkerglobalscope-registered-reporting-observer-list</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-windoworworkerglobalscope-registered-reporting-observer-list">4. Reporting Observers</a>
    <li><a href="#ref-for-windoworworkerglobalscope-registered-reporting-observer-list①">4.1. Interface ReportingObserver</a> <a href="#ref-for-windoworworkerglobalscope-registered-reporting-observer-list②">(2)</a>
    <li><a href="#ref-for-windoworworkerglobalscope-registered-reporting-observer-list③">4.3. 
    Add report to observer </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="registered">
   <b><a href="#registered">#registered</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-registered">4.1. Interface ReportingObserver</a>
    <li><a href="#ref-for-registered①">4.2. 
    Notify reporting observers on scope with report </a> <a href="#ref-for-registered②">(2)</a>
    <li><a href="#ref-for-registered③">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="windoworworkerglobalscope-report-buffer">
   <b><a href="#windoworworkerglobalscope-report-buffer">#windoworworkerglobalscope-report-buffer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-windoworworkerglobalscope-report-buffer">4. Reporting Observers</a>
    <li><a href="#ref-for-windoworworkerglobalscope-report-buffer①">4.1. Interface ReportingObserver</a>
    <li><a href="#ref-for-windoworworkerglobalscope-report-buffer②">4.2. 
    Notify reporting observers on scope with report </a> <a href="#ref-for-windoworworkerglobalscope-report-buffer③">(2)</a> <a href="#ref-for-windoworworkerglobalscope-report-buffer④">(3)</a>
    <li><a href="#ref-for-windoworworkerglobalscope-report-buffer⑤">5.2. Garbage Collection</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reportbody">
   <b><a href="#reportbody">#reportbody</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reportbody">4.1. Interface ReportingObserver</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reportingobserver">
   <b><a href="#reportingobserver">#reportingobserver</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reportingobserver">4. Reporting Observers</a>
    <li><a href="#ref-for-reportingobserver①">4.1. Interface ReportingObserver</a> <a href="#ref-for-reportingobserver②">(2)</a> <a href="#ref-for-reportingobserver③">(3)</a> <a href="#ref-for-reportingobserver④">(4)</a>
    <li><a href="#ref-for-reportingobserver⑤">4.2. 
    Notify reporting observers on scope with report </a>
    <li><a href="#ref-for-reportingobserver⑥">4.3. 
    Add report to observer </a>
    <li><a href="#ref-for-reportingobserver⑦">4.4. 
    Invoke reporting observers with notify list </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="callbackdef-reportingobservercallback">
   <b><a href="#callbackdef-reportingobservercallback">#callbackdef-reportingobservercallback</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-callbackdef-reportingobservercallback">4.1. Interface ReportingObserver</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-reportingobserveroptions">
   <b><a href="#dictdef-reportingobserveroptions">#dictdef-reportingobserveroptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-reportingobserveroptions">4.1. Interface ReportingObserver</a> <a href="#ref-for-dictdef-reportingobserveroptions①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-reportingobserveroptions-types">
   <b><a href="#dom-reportingobserveroptions-types">#dom-reportingobserveroptions-types</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-reportingobserveroptions-types">4.3. 
    Add report to observer </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-reportingobserveroptions-buffered">
   <b><a href="#dom-reportingobserveroptions-buffered">#dom-reportingobserveroptions-buffered</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-reportingobserveroptions-buffered">4. Reporting Observers</a>
    <li><a href="#ref-for-dom-reportingobserveroptions-buffered①">4.1. Interface ReportingObserver</a> <a href="#ref-for-dom-reportingobserveroptions-buffered②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="typedefdef-reportlist">
   <b><a href="#typedefdef-reportlist">#typedefdef-reportlist</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-typedefdef-reportlist">4.1. Interface ReportingObserver</a> <a href="#ref-for-typedefdef-reportlist①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-report">
   <b><a href="#dom-report">#dom-report</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-report">4.1. Interface ReportingObserver</a> <a href="#ref-for-dom-report①">(2)</a> <a href="#ref-for-dom-report②">(3)</a> <a href="#ref-for-dom-report③">(4)</a> <a href="#ref-for-dom-report④">(5)</a>
    <li><a href="#ref-for-dom-report⑤">4.3. 
    Add report to observer </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-report-type">
   <b><a href="#dom-report-type">#dom-report-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-report-type">4.1. Interface ReportingObserver</a>
    <li><a href="#ref-for-dom-report-type①">4.3. 
    Add report to observer </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-report-url">
   <b><a href="#dom-report-url">#dom-report-url</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-report-url">4.1. Interface ReportingObserver</a>
    <li><a href="#ref-for-dom-report-url①">4.3. 
    Add report to observer </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-report-body">
   <b><a href="#dom-report-body">#dom-report-body</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-report-body">4.1. Interface ReportingObserver</a>
    <li><a href="#ref-for-dom-report-body①">4.3. 
    Add report to observer </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reportingobserver-callback">
   <b><a href="#reportingobserver-callback">#reportingobserver-callback</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reportingobserver-callback">4.1. Interface ReportingObserver</a>
    <li><a href="#ref-for-reportingobserver-callback①">4.4. 
    Invoke reporting observers with notify list </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reportingobserver-options">
   <b><a href="#reportingobserver-options">#reportingobserver-options</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reportingobserver-options">4.1. Interface ReportingObserver</a> <a href="#ref-for-reportingobserver-options①">(2)</a> <a href="#ref-for-reportingobserver-options②">(3)</a>
    <li><a href="#ref-for-reportingobserver-options③">4.3. 
    Add report to observer </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reportingobserver-report-queue">
   <b><a href="#reportingobserver-report-queue">#reportingobserver-report-queue</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reportingobserver-report-queue">4.1. Interface ReportingObserver</a> <a href="#ref-for-reportingobserver-report-queue①">(2)</a>
    <li><a href="#ref-for-reportingobserver-report-queue②">4.3. 
    Add report to observer </a> <a href="#ref-for-reportingobserver-report-queue③">(2)</a> <a href="#ref-for-reportingobserver-report-queue④">(3)</a>
    <li><a href="#ref-for-reportingobserver-report-queue⑤">4.4. 
    Invoke reporting observers with notify list </a> <a href="#ref-for-reportingobserver-report-queue⑥">(2)</a> <a href="#ref-for-reportingobserver-report-queue⑦">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-reportingobserver-reportingobserver">
   <b><a href="#dom-reportingobserver-reportingobserver">#dom-reportingobserver-reportingobserver</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-reportingobserver-reportingobserver">4.1. Interface ReportingObserver</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-reportingobserver-observe">
   <b><a href="#dom-reportingobserver-observe">#dom-reportingobserver-observe</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-reportingobserver-observe">4.1. Interface ReportingObserver</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-reportingobserver-disconnect">
   <b><a href="#dom-reportingobserver-disconnect">#dom-reportingobserver-disconnect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-reportingobserver-disconnect">4.1. Interface ReportingObserver</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-reportingobserver-takerecords">
   <b><a href="#dom-reportingobserver-takerecords">#dom-reportingobserver-takerecords</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-reportingobserver-takerecords">4.1. Interface ReportingObserver</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-generatetestreportparameters-message">
   <b><a href="#dom-generatetestreportparameters-message">#dom-generatetestreportparameters-message</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-generatetestreportparameters-message">7.1. Generate Test Report</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-generatetestreportparameters-group">
   <b><a href="#dom-generatetestreportparameters-group">#dom-generatetestreportparameters-group</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-generatetestreportparameters-group">7.1. Generate Test Report</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>
<script>/* script-mdn-anno */

            document.body.addEventListener("click", (e) => {
                if(e.target.closest(".mdn-anno-btn")) {
                    e.target.closest(".mdn-anno").classList.toggle("wrapped");
                }
            });
            </script>
<script>/* script-var-click-highlighting */

    document.addEventListener("click", e=>{
        if(e.target.nodeName == "VAR") {
            highlightSameAlgoVars(e.target);
        }
    });
    {
        const indexCounts = new Map();
        const indexNames = new Map();
        function highlightSameAlgoVars(v) {
            // Find the algorithm container.
            let algoContainer = null;
            let searchEl = v;
            while(algoContainer == null && searchEl != document.body) {
                searchEl = searchEl.parentNode;
                if(searchEl.hasAttribute("data-algorithm")) {
                    algoContainer = searchEl;
                }
            }

            // Not highlighting document-global vars,
            // too likely to be unrelated.
            if(algoContainer == null) return;

            const algoName = algoContainer.getAttribute("data-algorithm");
            const varName = getVarName(v);
            const addClass = !v.classList.contains("selected");
            let highlightClass = null;
            if(addClass) {
                const index = chooseHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] += 1;
                indexNames.set(algoName+"///"+varName, index);
                highlightClass = nameFromIndex(index);
            } else {
                const index = previousHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] -= 1;
                highlightClass = nameFromIndex(index);
            }

            // Find all same-name vars, and toggle their class appropriately.
            for(const el of algoContainer.querySelectorAll("var")) {
                if(getVarName(el) == varName) {
                    el.classList.toggle("selected", addClass);
                    el.classList.toggle(highlightClass, addClass);
                }
            }
        }
        function getVarName(el) {
            return el.textContent.replace(/(\s| )+/, " ").trim();
        }
        function chooseHighlightIndex(algoName, varName) {
            let indexes = null;
            if(indexCounts.has(algoName)) {
                indexes = indexCounts.get(algoName);
            } else {
                // 7 classes right now
                indexes = [0,0,0,0,0,0,0];
                indexCounts.set(algoName, indexes);
            }

            // If the element was recently unclicked,
            // *and* that color is still unclaimed,
            // give it back the same color.
            const lastIndex = previousHighlightIndex(algoName, varName);
            if(indexes[lastIndex] === 0) return lastIndex;

            // Find the earliest index with the lowest count.
            const minCount = Math.min.apply(null, indexes);
            let index = null;
            for(var i = 0; i < indexes.length; i++) {
                if(indexes[i] == minCount) {
                    return i;
                }
            }
        }
        function previousHighlightIndex(algoName, varName) {
            return indexNames.get(algoName+"///"+varName);
        }
        function nameFromIndex(index) {
            return "selected" + index;
        }
    }
    </script>